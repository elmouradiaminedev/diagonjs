// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Grammar expression translation > With options {"output":"abnf"} > should translate a simple ABNF - URL 1`] = `
"URL = domain [ path ] [ attributes ] [ fragment ]

domain = scheme "://" [ credential ] host [ port ]

scheme = %i"http" / %i"https"

credential = username [ ":" password ] "@"

host = 1*( subdomain "." ) domain

port = ":" number

path = "/"

attributes = "?" attribute-key-value *( "&" attribute-key-value )

attribute-key-pair = key [ "=" value ]

"
`;

exports[`Grammar expression translation > With options {"output":"abnf"} > should translate a simple ABNF - URL 2`] = `
"nsource-list = *WSP [ source-expression *( 1*WSP source-expression ) *WSP ] / *WSP %i"'none'" *WSP

source-expression = scheme-source / host-source / keyword-source / nonce-source / hash-source

scheme-source = scheme-part ":"

host-source = [ scheme-part "://" ] host-part [ port-part ] [ path-part ]

keyword-source = %i"'self'" / %i"'unsafe-inline'" / %i"'unsafe-eval'"

base64-value = 1*( (ALPHA / DIGIT / "+" / "/") ) *2( "=" )

nonce-value = base64-value

hash-value = base64-value

nonce-source = %i"'nonce-" nonce-value "'"

hash-algo = %i"sha256" / %i"sha384" / %i"sha512"

hash-source = "'" hash-algo "-" hash-value "'"

scheme-part = < scheme production from RFC 3986, section 3.1 >

host-part = "*" / [ "*." ] 1*host-char *( "." 1*host-char )

host-char = ALPHA / DIGIT / "-"

path-part = < path production from RFC 3986, section 3.3 >

port-part = ":" (1*DIGIT / "*")

"
`;

exports[`Grammar expression translation > With options {"output":"abnf"} > should translate a simple ABNF - URL 3`] = `
"letter = %x41-5A / %x61-7A

digit = %x30-39

symbol = %x22 / "'" / "(" / ")" / "," / "." / %x3B-3E / "[" / "]" / "{" / "|" / "}"

character = letter / digit / symbol / "_"

identifier = letter *( (letter / digit / "_") )

terminal = "'" character *( character ) "'" / %x22 character *( character ) %x22

lhs = identifier

rhs = identifier / terminal / "[" rhs "]" / "{" rhs "}" / "(" rhs ")" / rhs "|" rhs / rhs "," rhs

rule = lhs "=" rhs ";"

grammar = *( rule )

"
`;

exports[`Grammar expression translation > With options {"output":"abnf"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX = *( PRODUCTION )

PRODUCTION = IDENTIFIER "=" EXPRESSION "."

EXPRESSION = TERM *( "|" TERM )

TERM = FACTOR *( FACTOR )

FACTOR = IDENTIFIER / LITERAL / "[" EXPRESSION "]" / "(" EXPRESSION ")" / "{" EXPRESSION "}"

IDENTIFIER = letter *( letter )

LITERAL = "" "" character *( character ) "" ""

"
`;

exports[`Grammar expression translation > With options {"output":"ascii"} > should translate a simple ABNF - URL 1`] = `
"URL:
                  ,---->-----.  ,------->--------.  ,------>-------.
                  |          |  |                |  |              |
    ||-- domain --^-- path -->--^-- attributes -->--^-- fragment -->--||

domain:
                           ,------->--------.          ,---->-----.
                           |                |          |          |
    ||-- scheme -- "://" --^-- credential -->-- host --^-- port -->--||

scheme:
    ||--v-- "http"/i --->--||
        |               |
        \`-- "https"/i --'

credential:
                    ,---------->----------.
                    |                     |
    ||-- username --^-- ":" -- password -->-- "@" --||

host:
    ||-->-- subdomain -- "." --v-- domain --||
        |                      |
        \`----------<-----------'

port:
    ||-- ":" -- number --||

path:
    ||-- "/" --||

attributes:
    ||-- "?" -->-- attribute-key-value --v--||
               |                         |
               \`---------- "&" ----------'

attribute-key-pair:
               ,-------->---------.
               |                  |
    ||-- key --^-- "=" -- value -->--||

"
`;

exports[`Grammar expression translation > With options {"output":"ascii"} > should translate a simple ABNF - URL 2`] = `
"nsource-list:
                        ,-------------------->---------------------.
                        |                                          |
    ||--v-->---------v--^-->-- source-expression --v-->---------v-->-->--||
        |  |         |     |                       |  |         |     |
        |  \`-- WSP --'     \`------v-- WSP --<------'  \`-- WSP --'     |
        |                         |         |                         |
        |                         \`---->----'                         |
        |                                                             |
        \`----------->---------v-- "'none'"/i -->---------v------------'
                    |         |                |         |
                    \`-- WSP --'                \`-- WSP --'

source-expression:
    ||--v-- scheme-source --->--||
        |                    |
        >--- host-source ----^
        |                    |
        >-- keyword-source --^
        |                    |
        >--- nonce-source ---^
        |                    |
        \`--- hash-source ----'

scheme-source:
    ||-- scheme-part -- ":" --||

host-source:
        ,------------>-------------.               ,------->-------.  ,------->-------.
        |                          |               |               |  |               |
    ||--^-- scheme-part -- "://" -->-- host-part --^-- port-part -->--^-- path-part -->--||

keyword-source:
    ||--v------ "'self'"/i ------->--||
        |                         |
        >-- "'unsafe-inline'"/i --^
        |                         |
        \`--- "'unsafe-eval'"/i ---'

base64-value:
        ,--------<--------.
        |                 |
    ||-->--v-- ALPHA -->--^----->---------v-----||
           |           |        |         |
           >-- DIGIT --^        \`-- "=" --'
           |           |      (twice at most)
           >--- "+" ---^
           |           |
           \`--- "/" ---'

nonce-value:
    ||-- base64-value --||

hash-value:
    ||-- base64-value --||

nonce-source:
    ||-- "'nonce-"/i -- nonce-value -- "'" --||

hash-algo:
    ||--v-- "sha256"/i -->--||
        |                |
        >-- "sha384"/i --^
        |                |
        \`-- "sha512"/i --'

hash-source:
    ||-- "'" -- hash-algo -- "-" -- hash-value -- "'" --||

scheme-part:
    ||--? scheme production from RFC 3986, section 3.1 ?--||

host-part:
    ||--v---------------------------------- "*" ---------------------------------->--||
        |                                                                         |
        |  ,---->-----.                                                           |
        |  |          |                                                           |
        \`--^-- "*." -->-->-- host-char --v--v---------------------------------->--'
                         |               |  |                                  |
                         \`-------<-------'  \`-->-- "." -->-- host-char --v--v--'
                                               |         |               |  |
                                               |         \`-------<-------'  |
                                               |                            |
                                               \`-------------<--------------'

host-char:
    ||--v-- ALPHA -->--||
        |           |
        >-- DIGIT --^
        |           |
        \`--- "-" ---'

path-part:
    ||--? path production from RFC 3986, section 3.3 ?--||

port-part:
    ||-- ":" --v-->-- DIGIT --v-->--||
               |  |           |  |
               |  \`-----<-----'  |
               |                 |
               \`------ "*" ------'

"
`;

exports[`Grammar expression translation > With options {"output":"ascii"} > should translate a simple ABNF - URL 3`] = `
"letter:
    ||--v-- "A" -->--||
        |         |
        |    :    |
        |         |
        >-- "Z" --^
        |         |
        >-- "a" --^
        |         |
        |    :    |
        |         |
        \`-- "z" --'

digit:
    ||--v-- "0" -->--||
        |         |
        |    :    |
        |         |
        \`-- "9" --'

symbol:
    ||--v-- "\\"" -->--||
        |          |
        >-- "'" ---^
        |          |
        >-- "(" ---^
        |          |
        >-- ")" ---^
        |          |
        >-- "," ---^
        |          |
        >-- "." ---^
        |          |
        >-- ";" ---^
        |          |
        |    :     |
        |          |
        >-- ">" ---^
        |          |
        >-- "[" ---^
        |          |
        >-- "]" ---^
        |          |
        >-- "{" ---^
        |          |
        >-- "|" ---^
        |          |
        \`-- "}" ---'

character:
    ||--v-- letter -->--||
        |            |
        >-- digit ---^
        |            |
        >-- symbol --^
        |            |
        \`--- "_" ----'

identifier:
    ||-- letter -->------------------v--||
                  |                  |
                  \`--<-- letter --v--'
                     |            |
                     ^-- digit ---<
                     |            |
                     \`--- "_" ----'

terminal:
    ||--v--- "'" -->-- character --v-- "'" --->--||
        |          |               |          |
        |          \`-------<-------'          |
        |                                     |
        \`-- "\\"" -->-- character --v-- "\\"" --'
                   |               |
                   \`-------<-------'

lhs:
    ||-- identifier --||

rhs:
    ||--v----- identifier ------>--||
        |                       |
        >------ terminal -------^
        |                       |
        >-- "[" -- rhs -- "]" --^
        |                       |
        >-- "{" -- rhs -- "}" --^
        |                       |
        >-- "(" -- rhs -- ")" --^
        |                       |
        >-- rhs -- "|" -- rhs --^
        |                       |
        \`-- rhs -- "," -- rhs --'

rule:
    ||-- lhs -- "=" -- rhs -- ";" --||

grammar:
    ||-->----------v--||
        |          |
        \`-- rule --'

"
`;

exports[`Grammar expression translation > With options {"output":"ascii"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX:
    ||-->----------------v--||
        |                |
        \`-- PRODUCTION --'

PRODUCTION:
    ||-- IDENTIFIER -- "=" -- EXPRESSION -- "." --||

EXPRESSION:
    ||-->-- TERM --v--||
        |          |
        \`-- "|" ---'

TERM:
    ||-->-- FACTOR --v--||
        |            |
        \`-----<------'

FACTOR:
    ||--v--------- IDENTIFIER --------->--||
        |                              |
        >---------- LITERAL -----------^
        |                              |
        >-- "[" -- EXPRESSION -- "]" --^
        |                              |
        >-- "(" -- EXPRESSION -- ")" --^
        |                              |
        \`-- "{" -- EXPRESSION -- "}" --'

IDENTIFIER:
    ||-->-- letter --v--||
        |            |
        \`-----<------'

LITERAL:
    ||-->-- character --v--||
        |               |
        \`-------<-------'

"
`;

exports[`Grammar expression translation > With options {"output":"blab"} > should translate a simple ABNF - URL 1`] = `
"URL = domain  ( path )?  ( attributes )?  ( fragment )?

domain = scheme  "://"  ( credential )?  host  ( port )?

scheme = [hH][tT][tT][pP]
	| [hH][tT][tT][pP][sS]

credential = username  ( ":" password )?  "@"

host = ( subdomain "." )+  domain

port = ":"  number

path = "/"

attributes = "?"  attribute-key-value  ( "&" attribute-key-value )*

attribute-key-pair = key  ( "=" value )?

"
`;

exports[`Grammar expression translation > With options {"output":"blab"} > should translate a simple ABNF - URL 2`] = `
"nsource-list = WSP*  ( source-expression ( WSP+ source-expression )* WSP* )?
	| WSP*  [\\'][nN][oO][nN][eE][\\']  WSP*

source-expression = scheme-source
	| host-source
	| keyword-source
	| nonce-source
	| hash-source

scheme-source = scheme-part  ":"

host-source = ( scheme-part "://" )?  host-part  ( port-part )?  ( path-part )?

keyword-source = [\\'][sS][eE][lL][fF][\\']
	| [\\'][uU][nN][sS][aA][fF][eE][-][iI][nN][lL][iI][nN][eE][\\']
	| [\\'][uU][nN][sS][aA][fF][eE][-][eE][vV][aA][lL][\\']

base64-value = ( ALPHA | DIGIT | "+" | "/" )+  ( "=" ){0,2}

nonce-value = base64-value

hash-value = base64-value

nonce-source = [\\'][nN][oO][nN][cC][eE][-]  nonce-value  "\\'"

hash-algo = [sS][hH][aA][2][5][6]
	| [sS][hH][aA][3][8][4]
	| [sS][hH][aA][5][1][2]

hash-source = "\\'"  hash-algo  "-"  hash-value  "\\'"

"
`;

exports[`Grammar expression translation > With options {"output":"blab"} > should translate a simple ABNF - URL 3`] = `
"scheme-part =letter = "A"
	| "B"
	| "C"
	| "D"
	| "E"
	| "F"
	| "G"
	| "H"
	| "I"
	| "J"
	| "K"
	| "L"
	| "M"
	| "N"
	| "O"
	| "P"
	| "Q"
	| "R"
	| "S"
	| "T"
	| "U"
	| "V"
	| "W"
	| "X"
	| "Y"
	| "Z"
	| "a"
	| "b"
	| "c"
	| "d"
	| "e"
	| "f"
	| "g"
	| "h"
	| "i"
	| "j"
	| "k"
	| "l"
	| "m"
	| "n"
	| "o"
	| "p"
	| "q"
	| "r"
	| "s"
	| "t"
	| "u"
	| "v"
	| "w"
	| "x"
	| "y"
	| "z"

digit = "0"
	| "1"
	| "2"
	| "3"
	| "4"
	| "5"
	| "6"
	| "7"
	| "8"
	| "9"

symbol = "["
	| "]"
	| "{"
	| "}"
	| "("
	| ")"
	| "<"
	| ">"
	| "\\'"
	| "\\""
	| "="
	| "|"
	| "."
	| ","
	| ";"

character = letter
	| digit
	| symbol
	| "_"

identifier = letter  ( letter | digit | "_" )*

terminal = "\\'"  character  ( character )*  "\\'"
	| "\\""  character  ( character )*  "\\""

lhs = identifier

rhs = identifier
	| terminal
	| "["  rhs  "]"
	| "{"  rhs  "}"
	| "("  rhs  ")"
	| rhs  "|"  rhs
	| rhs  ","  rhs

rule = lhs  "="  rhs  ";"

grammar = ( rule )*

"
`;

exports[`Grammar expression translation > With options {"output":"blab"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX = ( PRODUCTION )*

PRODUCTION = IDENTIFIER  "="  EXPRESSION  "."

EXPRESSION = TERM  ( "|" TERM )*

TERM = FACTOR  ( FACTOR )*

FACTOR = IDENTIFIER
	| LITERAL
	| "["  EXPRESSION  "]"
	| "("  EXPRESSION  ")"
	| "{"  EXPRESSION  "}"

IDENTIFIER = letter  ( letter )*

LITERAL = ""  ""  character  ( character )*  ""  ""

"
`;

exports[`Grammar expression translation > With options {"output":"bnf"} > should translate a simple ABNF - URL 1`] = `
"<URL> ::= <domain>

<domain> ::= <scheme> "://" <host>

"
`;

exports[`Grammar expression translation > With options {"output":"bnf"} > should translate a simple ABNF - URL 2`] = `
"<scheme> ::=<nsource-list> ::= <WSP>
"
`;

exports[`Grammar expression translation > With options {"output":"bnf"} > should translate a simple ABNF - URL 3`] = `
"	| <WSP><letter> ::= "A"
	| "B"
	| "C"
	| "D"
	| "E"
	| "F"
	| "G"
	| "H"
	| "I"
	| "J"
	| "K"
	| "L"
	| "M"
	| "N"
	| "O"
	| "P"
	| "Q"
	| "R"
	| "S"
	| "T"
	| "U"
	| "V"
	| "W"
	| "X"
	| "Y"
	| "Z"
	| "a"
	| "b"
	| "c"
	| "d"
	| "e"
	| "f"
	| "g"
	| "h"
	| "i"
	| "j"
	| "k"
	| "l"
	| "m"
	| "n"
	| "o"
	| "p"
	| "q"
	| "r"
	| "s"
	| "t"
	| "u"
	| "v"
	| "w"
	| "x"
	| "y"
	| "z"

<digit> ::= "0"
	| "1"
	| "2"
	| "3"
	| "4"
	| "5"
	| "6"
	| "7"
	| "8"
	| "9"

<symbol> ::= "["
	| "]"
	| "{"
	| "}"
	| "("
	| ")"
	| "<"
	| ">"
	| "'"
	| '"'
	| "="
	| "|"
	| "."
	| ","
	| ";"

<character> ::= <letter>
	| <digit>
	| <symbol>
	| "_"

<identifier> ::= <letter>

<terminal> ::= "'" <character> "'"
	| '"' <character> '"'

<lhs> ::= <identifier>

<rhs> ::= <identifier>
	| <terminal>
	| "[" <rhs> "]"
	| "{" <rhs> "}"
	| "(" <rhs> ")"
	| <rhs> "|" <rhs>
	| <rhs> "," <rhs>

<rule> ::= <lhs> "=" <rhs> ";"

<grammar> ::=

"
`;

exports[`Grammar expression translation > With options {"output":"bnf"} > should translate a simple ABNF - URL 4`] = `
"<SYNTAX> ::=

<PRODUCTION> ::= <IDENTIFIER> "=" <EXPRESSION> "."

<EXPRESSION> ::= <TERM>

<TERM> ::= <FACTOR>

<FACTOR> ::= <IDENTIFIER>
	| <LITERAL>
	| "[" <EXPRESSION> "]"
	| "(" <EXPRESSION> ")"
	| "{" <EXPRESSION> "}"

<IDENTIFIER> ::= <letter>

<LITERAL> ::= "" "" <character> "" ""

"
`;

exports[`Grammar expression translation > With options {"output":"ebnfhtml5"} > should translate a simple ABNF - URL 1`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='URL'>URL</a>:</dt>
    <dd>
      <span class='alt'><a href='#domain' class='rule' data-min='1' data-max='1'>domain</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#path' class='rule' data-min='1' data-max='1'>path</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#attributes' class='rule' data-min='1' data-max='1'>attributes</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#fragment' class='rule' data-min='1' data-max='1'>fragment</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='domain'>domain</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme' class='rule' data-min='1' data-max='1'>scheme</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;://&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#credential' class='rule' data-min='1' data-max='1'>credential</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><a href='#host' class='rule' data-min='1' data-max='1'>host</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#port' class='rule' data-min='1' data-max='1'>port</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme'>scheme</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;http&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;https&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='credential'>credential</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>username</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#password' class='rule' data-min='1' data-max='1'>password</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;@&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host'>host</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>(</span> <span class='alt'><a href='#subdomain' class='rule' data-min='1' data-max='1'>subdomain</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
 <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><a href='#domain' class='rule' data-min='1' data-max='1'>domain</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='port'>port</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='token'>number</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='path'>path</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;/&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='attributes'>attributes</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;?&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='token'>attribute-key-value</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;&amp;&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#attribute-key-value' class='rule' data-min='1' data-max='1'>attribute-key-value</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='attribute-key-pair'>attribute-key-pair</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>key</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#value' class='rule' data-min='1' data-max='1'>value</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfhtml5"} > should translate a simple ABNF - URL 2`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='nsource-list'>nsource-list</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#source-expression' class='rule' data-min='1' data-max='1'>source-expression</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><span class='rep'>(</span> <a href='#WSP' class='rule' data-min='1' data-max='0'>WSP</a> <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><a href='#source-expression' class='rule' data-min='1' data-max='1'>source-expression</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <a href='#WSP' class='rule' data-min='0' data-max='0'>WSP</a> <span class='rep'>}</span></span>
 <span class='rep'>]</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal ci'>&quot;'none'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='source-expression'>source-expression</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme-source' class='rule' data-min='1' data-max='1'>scheme-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#host-source' class='rule' data-min='1' data-max='1'>host-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#keyword-source' class='rule' data-min='1' data-max='1'>keyword-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#nonce-source' class='rule' data-min='1' data-max='1'>nonce-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#hash-source' class='rule' data-min='1' data-max='1'>hash-source</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme-source'>scheme-source</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme-part' class='rule' data-min='1' data-max='1'>scheme-part</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-source'>host-source</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#scheme-part' class='rule' data-min='1' data-max='1'>scheme-part</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;://&quot;</tt></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><a href='#host-part' class='rule' data-min='1' data-max='1'>host-part</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#port-part' class='rule' data-min='1' data-max='1'>port-part</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#path-part' class='rule' data-min='1' data-max='1'>path-part</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='keyword-source'>keyword-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;'self'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;'unsafe-inline'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;'unsafe-eval'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='base64-value'>base64-value</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>(</span> <span class='alt'><a href='#ALPHA' class='rule' data-min='1' data-max='1'>ALPHA</a></span>
<span class='pipe'> | </span><span class='alt'><a href='#DIGIT' class='rule' data-min='1' data-max='1'>DIGIT</a></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;+&quot;</tt></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;/&quot;</tt></span>
 <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
 <span class='rep'>)</span><sub class='rep'>{0, 2}</sub></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='nonce-value'>nonce-value</a>:</dt>
    <dd>
      <span class='alt'><a href='#base64-value' class='rule' data-min='1' data-max='1'>base64-value</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-value'>hash-value</a>:</dt>
    <dd>
      <span class='alt'><a href='#base64-value' class='rule' data-min='1' data-max='1'>base64-value</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='nonce-source'>nonce-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;'nonce-&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#nonce-value' class='rule' data-min='1' data-max='1'>nonce-value</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-algo'>hash-algo</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;sha256&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;sha384&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;sha512&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-source'>hash-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#hash-algo' class='rule' data-min='1' data-max='1'>hash-algo</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;-&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#hash-value' class='rule' data-min='1' data-max='1'>hash-value</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme-part'>scheme-part</a>:</dt>
    <dd>
      <span class='alt'><span class='prose'>scheme production from RFC 3986, section 3.1</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-part'>host-part</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;*&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;*.&quot;</tt></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <a href='#host-char' class='rule' data-min='1' data-max='0'>host-char</a> <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <a href='#host-char' class='rule' data-min='1' data-max='0'>host-char</a> <span class='rep'>)</span></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-char'>host-char</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>ALPHA</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='token'>DIGIT</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;-&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='path-part'>path-part</a>:</dt>
    <dd>
      <span class='alt'><span class='prose'>path production from RFC 3986, section 3.3</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='port-part'>port-part</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <span class='alt'><span class='rep'>(</span> <a href='#DIGIT' class='rule' data-min='1' data-max='0'>DIGIT</a> <span class='rep'>)</span></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;*&quot;</tt></span>
 <span class='rep'>)</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfhtml5"} > should translate a simple ABNF - URL 3`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='letter'>letter</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;A&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;B&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;C&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;D&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;E&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;F&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;G&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;H&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;I&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;J&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;K&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;L&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;M&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;N&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;O&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;P&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Q&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;R&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;S&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;T&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;U&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;V&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;W&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;X&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Y&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Z&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;a&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;b&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;c&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;d&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;e&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;f&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;g&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;h&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;i&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;j&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;k&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;l&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;m&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;n&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;o&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;p&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;q&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;r&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;s&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;t&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;u&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;v&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;w&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;x&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;y&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;z&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='digit'>digit</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;0&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;1&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;2&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;3&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;4&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;5&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;6&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;7&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;8&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;9&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='symbol'>symbol</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;&lt;&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;&gt;&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;,&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;;&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='character'>character</a>:</dt>
    <dd>
      <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#digit' class='rule' data-min='1' data-max='1'>digit</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#symbol' class='rule' data-min='1' data-max='1'>symbol</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;_&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='identifier'>identifier</a>:</dt>
    <dd>
      <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<span class='pipe'> | </span><span class='alt'><a href='#digit' class='rule' data-min='1' data-max='1'>digit</a></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;_&quot;</tt></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='terminal'>terminal</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='lhs'>lhs</a>:</dt>
    <dd>
      <span class='alt'><a href='#identifier' class='rule' data-min='1' data-max='1'>identifier</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='rhs'>rhs</a>:</dt>
    <dd>
      <span class='alt'><a href='#identifier' class='rule' data-min='1' data-max='1'>identifier</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#terminal' class='rule' data-min='1' data-max='1'>terminal</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;,&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='rule'>rule</a>:</dt>
    <dd>
      <span class='alt'><a href='#lhs' class='rule' data-min='1' data-max='1'>lhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;;&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='grammar'>grammar</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#rule' class='rule' data-min='1' data-max='1'>rule</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfhtml5"} > should translate a simple ABNF - URL 4`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='SYNTAX'>SYNTAX</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#PRODUCTION' class='rule' data-min='1' data-max='1'>PRODUCTION</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='PRODUCTION'>PRODUCTION</a>:</dt>
    <dd>
      <span class='alt'><a href='#IDENTIFIER' class='rule' data-min='1' data-max='1'>IDENTIFIER</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='EXPRESSION'>EXPRESSION</a>:</dt>
    <dd>
      <span class='alt'><a href='#TERM' class='rule' data-min='1' data-max='1'>TERM</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#TERM' class='rule' data-min='1' data-max='1'>TERM</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='TERM'>TERM</a>:</dt>
    <dd>
      <span class='alt'><a href='#FACTOR' class='rule' data-min='1' data-max='1'>FACTOR</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#FACTOR' class='rule' data-min='1' data-max='1'>FACTOR</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='FACTOR'>FACTOR</a>:</dt>
    <dd>
      <span class='alt'><a href='#IDENTIFIER' class='rule' data-min='1' data-max='1'>IDENTIFIER</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#LITERAL' class='rule' data-min='1' data-max='1'>LITERAL</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='IDENTIFIER'>IDENTIFIER</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>letter</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='LITERAL'>LITERAL</a>:</dt>
    <dd>
      <span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='token'>character</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfxhtml5"} > should translate a simple ABNF - URL 1`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='URL'>URL</a>:</dt>
    <dd>
      <span class='alt'><a href='#domain' class='rule' data-min='1' data-max='1'>domain</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#path' class='rule' data-min='1' data-max='1'>path</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#attributes' class='rule' data-min='1' data-max='1'>attributes</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#fragment' class='rule' data-min='1' data-max='1'>fragment</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='domain'>domain</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme' class='rule' data-min='1' data-max='1'>scheme</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;://&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#credential' class='rule' data-min='1' data-max='1'>credential</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><a href='#host' class='rule' data-min='1' data-max='1'>host</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#port' class='rule' data-min='1' data-max='1'>port</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme'>scheme</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;http&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;https&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='credential'>credential</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>username</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#password' class='rule' data-min='1' data-max='1'>password</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;@&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host'>host</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>(</span> <span class='alt'><a href='#subdomain' class='rule' data-min='1' data-max='1'>subdomain</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
 <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><a href='#domain' class='rule' data-min='1' data-max='1'>domain</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='port'>port</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='token'>number</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='path'>path</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;/&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='attributes'>attributes</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;?&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='token'>attribute-key-value</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;&amp;&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#attribute-key-value' class='rule' data-min='1' data-max='1'>attribute-key-value</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='attribute-key-pair'>attribute-key-pair</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>key</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#value' class='rule' data-min='1' data-max='1'>value</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfxhtml5"} > should translate a simple ABNF - URL 2`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='nsource-list'>nsource-list</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#source-expression' class='rule' data-min='1' data-max='1'>source-expression</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><span class='rep'>(</span> <a href='#WSP' class='rule' data-min='1' data-max='0'>WSP</a> <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><a href='#source-expression' class='rule' data-min='1' data-max='1'>source-expression</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <a href='#WSP' class='rule' data-min='0' data-max='0'>WSP</a> <span class='rep'>}</span></span>
 <span class='rep'>]</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal ci'>&quot;'none'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='token'>WSP</span> <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='source-expression'>source-expression</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme-source' class='rule' data-min='1' data-max='1'>scheme-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#host-source' class='rule' data-min='1' data-max='1'>host-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#keyword-source' class='rule' data-min='1' data-max='1'>keyword-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#nonce-source' class='rule' data-min='1' data-max='1'>nonce-source</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#hash-source' class='rule' data-min='1' data-max='1'>hash-source</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme-source'>scheme-source</a>:</dt>
    <dd>
      <span class='alt'><a href='#scheme-part' class='rule' data-min='1' data-max='1'>scheme-part</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-source'>host-source</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#scheme-part' class='rule' data-min='1' data-max='1'>scheme-part</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;://&quot;</tt></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><a href='#host-part' class='rule' data-min='1' data-max='1'>host-part</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#port-part' class='rule' data-min='1' data-max='1'>port-part</a></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>[</span> <span class='alt'><a href='#path-part' class='rule' data-min='1' data-max='1'>path-part</a></span>
 <span class='rep'>]</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='keyword-source'>keyword-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;'self'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;'unsafe-inline'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;'unsafe-eval'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='base64-value'>base64-value</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>(</span> <span class='alt'><a href='#ALPHA' class='rule' data-min='1' data-max='1'>ALPHA</a></span>
<span class='pipe'> | </span><span class='alt'><a href='#DIGIT' class='rule' data-min='1' data-max='1'>DIGIT</a></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;+&quot;</tt></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;/&quot;</tt></span>
 <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
 <span class='rep'>)</span><sub class='rep'>{0, 2}</sub></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='nonce-value'>nonce-value</a>:</dt>
    <dd>
      <span class='alt'><a href='#base64-value' class='rule' data-min='1' data-max='1'>base64-value</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-value'>hash-value</a>:</dt>
    <dd>
      <span class='alt'><a href='#base64-value' class='rule' data-min='1' data-max='1'>base64-value</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='nonce-source'>nonce-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;'nonce-&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#nonce-value' class='rule' data-min='1' data-max='1'>nonce-value</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-algo'>hash-algo</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal ci'>&quot;sha256&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;sha384&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal ci'>&quot;sha512&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='hash-source'>hash-source</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#hash-algo' class='rule' data-min='1' data-max='1'>hash-algo</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;-&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#hash-value' class='rule' data-min='1' data-max='1'>hash-value</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='scheme-part'>scheme-part</a>:</dt>
    <dd>
      <span class='alt'><span class='prose'>scheme production from RFC 3986, section 3.1</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-part'>host-part</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;*&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='rep'>[</span> <span class='alt'><tt class='literal cs'>&quot;*.&quot;</tt></span>
 <span class='rep'>]</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <a href='#host-char' class='rule' data-min='1' data-max='0'>host-char</a> <span class='rep'>)</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <a href='#host-char' class='rule' data-min='1' data-max='0'>host-char</a> <span class='rep'>)</span></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='host-char'>host-char</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>ALPHA</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><span class='token'>DIGIT</span></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;-&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='path-part'>path-part</a>:</dt>
    <dd>
      <span class='alt'><span class='prose'>path production from RFC 3986, section 3.3</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='port-part'>port-part</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;:&quot;</tt></span>
<span class='cat'> </span><span class='alt'><span class='rep'>(</span> <span class='alt'><span class='rep'>(</span> <a href='#DIGIT' class='rule' data-min='1' data-max='0'>DIGIT</a> <span class='rep'>)</span></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;*&quot;</tt></span>
 <span class='rep'>)</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfxhtml5"} > should translate a simple ABNF - URL 3`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='letter'>letter</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;A&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;B&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;C&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;D&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;E&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;F&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;G&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;H&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;I&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;J&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;K&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;L&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;M&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;N&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;O&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;P&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Q&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;R&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;S&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;T&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;U&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;V&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;W&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;X&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Y&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;Z&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;a&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;b&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;c&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;d&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;e&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;f&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;g&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;h&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;i&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;j&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;k&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;l&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;m&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;n&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;o&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;p&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;q&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;r&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;s&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;t&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;u&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;v&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;w&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;x&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;y&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;z&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='digit'>digit</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;0&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;1&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;2&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;3&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;4&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;5&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;6&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;7&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;8&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;9&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='symbol'>symbol</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;&lt;&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;&gt;&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;,&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;;&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='character'>character</a>:</dt>
    <dd>
      <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#digit' class='rule' data-min='1' data-max='1'>digit</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#symbol' class='rule' data-min='1' data-max='1'>symbol</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;_&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='identifier'>identifier</a>:</dt>
    <dd>
      <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
<span class='pipe'> | </span><span class='alt'><a href='#digit' class='rule' data-min='1' data-max='1'>digit</a></span>
<span class='pipe'> | </span><span class='alt'><tt class='literal cs'>&quot;_&quot;</tt></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='terminal'>terminal</a>:</dt>
    <dd>
      <span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;'&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;"&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='lhs'>lhs</a>:</dt>
    <dd>
      <span class='alt'><a href='#identifier' class='rule' data-min='1' data-max='1'>identifier</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='rhs'>rhs</a>:</dt>
    <dd>
      <span class='alt'><a href='#identifier' class='rule' data-min='1' data-max='1'>identifier</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#terminal' class='rule' data-min='1' data-max='1'>terminal</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;,&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='rule'>rule</a>:</dt>
    <dd>
      <span class='alt'><a href='#lhs' class='rule' data-min='1' data-max='1'>lhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#rhs' class='rule' data-min='1' data-max='1'>rhs</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;;&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='grammar'>grammar</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#rule' class='rule' data-min='1' data-max='1'>rule</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"ebnfxhtml5"} > should translate a simple ABNF - URL 4`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
    dl.bnf span.token {
    	text-transform: uppercase;
    }
    
    dl.bnf span.cat {
    	margin-right: 0.5ex;
    }
    
    dl.bnf dd > span.pipe {
    	float: left;
    	width: 1ex;
    	margin-left: -1.8ex;
    	text-align: right;
    	padding-right: .8ex; /* about the width of a space */
    }
    
    dl.bnf dt {
    	display: block;
    	min-width: 8em;
    	padding-right: 1em;
    }
    
    dl.bnf a.rule {
    	text-decoration: none;
    }
    
    dl.bnf a.rule:hover {
    	text-decoration: underline;
    }
    
    /* page stuff */
    dl.bnf { margin: 2em 4em; }
    dl.bnf dt { margin: 0.25em 0; }
    dl.bnf dd { margin-left: 2em; }
  </style>
 </head>
 <body>
  <dl class='bnf'>
    <dt><a name='SYNTAX'>SYNTAX</a>:</dt>
    <dd>
      <span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#PRODUCTION' class='rule' data-min='1' data-max='1'>PRODUCTION</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='PRODUCTION'>PRODUCTION</a>:</dt>
    <dd>
      <span class='alt'><a href='#IDENTIFIER' class='rule' data-min='1' data-max='1'>IDENTIFIER</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;=&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;.&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='EXPRESSION'>EXPRESSION</a>:</dt>
    <dd>
      <span class='alt'><a href='#TERM' class='rule' data-min='1' data-max='1'>TERM</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><tt class='literal cs'>&quot;|&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#TERM' class='rule' data-min='1' data-max='1'>TERM</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='TERM'>TERM</a>:</dt>
    <dd>
      <span class='alt'><a href='#FACTOR' class='rule' data-min='1' data-max='1'>FACTOR</a></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#FACTOR' class='rule' data-min='1' data-max='1'>FACTOR</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='FACTOR'>FACTOR</a>:</dt>
    <dd>
      <span class='alt'><a href='#IDENTIFIER' class='rule' data-min='1' data-max='1'>IDENTIFIER</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><a href='#LITERAL' class='rule' data-min='1' data-max='1'>LITERAL</a></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;[&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;]&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;(&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;)&quot;</tt></span>
<br/>
      <span class='pipe'> | </span>
      <span class='alt'><tt class='literal cs'>&quot;{&quot;</tt></span>
<span class='cat'> </span><span class='alt'><a href='#EXPRESSION' class='rule' data-min='1' data-max='1'>EXPRESSION</a></span>
<span class='cat'> </span><span class='alt'><tt class='literal cs'>&quot;}&quot;</tt></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='IDENTIFIER'>IDENTIFIER</a>:</dt>
    <dd>
      <span class='alt'><span class='token'>letter</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#letter' class='rule' data-min='1' data-max='1'>letter</a></span>
 <span class='rep'>}</span></span>
    </dd>
  </dl>

  <dl class='bnf'>
    <dt><a name='LITERAL'>LITERAL</a>:</dt>
    <dd>
      <span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='token'>character</span></span>
<span class='cat'> </span><span class='alt'><span class='rep'>{</span> <span class='alt'><a href='#character' class='rule' data-min='1' data-max='1'>character</a></span>
 <span class='rep'>}</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
<span class='cat'> </span><span class='alt'><span class='empty'>&epsilon;</span></span>
    </dd>
  </dl>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"html5"} > should translate a simple ABNF - URL 1`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='URL'>URL:</a></h2>
  <svg height='55' width='600'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M590.5 34 v12 m 4 0 v-12' class='station'/>
    <a href='#domain'>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>domain</text>
    </a>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#path'>
    <rect x='150' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='175' y='45' text-anchor='middle' class='rule'>path</text>
    </a>
    <path d='M327 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#attributes'>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>attributes</text>
    </a>
    <path d='M497 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='450' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='495' y='45' text-anchor='middle' class='rule'>fragment</text>
    <path d='M430 20 v10'/>
    <path d='M560 30 q0 10 10 10'/>
    <path d='M540 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M260 20 v10'/>
    <path d='M390 30 q0 10 10 10'/>
    <path d='M370 40 h80'/>
    <path d='M250 40 q10 0 10 -10'/>
    <path d='M260 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M130 20 v10'/>
    <path d='M220 30 q0 10 10 10'/>
    <path d='M200 40 h80'/>
    <path d='M120 40 q10 0 10 -10'/>
    <path d='M130 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M100 40 h50'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='domain'>domain:</a></h2>
  <svg height='55' width='560'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M550.5 34 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme'>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>scheme</text>
    </a>
    <rect x='120' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>://</text>
    <path d='M257 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#credential'>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>credential</text>
    </a>
    <a href='#host'>
    <rect x='350' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='375' y='45' text-anchor='middle' class='rule'>host</text>
    </a>
    <path d='M477 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#port'>
    <rect x='450' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='475' y='45' text-anchor='middle' class='rule'>port</text>
    </a>
    <path d='M430 20 v10'/>
    <path d='M520 30 q0 10 10 10'/>
    <path d='M500 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M400 40 h50'/>
    <path d='M190 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M180 40 q10 0 10 -10'/>
    <path d='M190 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M160 40 h50'/>
    <path d='M100 40 h20'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme'>scheme:</a></h2>
  <svg height='65' width='200'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M190.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='65' y='10' height='20' width='70' rx='8' ry='8' class='literal'/>
    <text x='100' y='25' text-anchor='middle' class='literal'>http</text>
    <text x='120' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='80' rx='8' ry='8' class='literal'/>
    <text x='100' y='55' text-anchor='middle' class='literal'>https</text>
    <text x='125' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M160 30 v10'/>
    <path d='M140 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M160 30 q0 -10 10 -10'/>
    <path d='M135 20 h55'/>
    <path d='M30 20 q10 0 10 10 v10'/>
    <path d='M10 20 h55'/>
  </svg>
 </section>

 <section>
  <h2><a name='credential'>credential:</a></h2>
  <svg height='55' width='400'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='45' text-anchor='middle' class='rule'>username</text>
    <path d='M237 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='170' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='45' text-anchor='middle' class='literal'>:</text>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>password</text>
    <rect x='350' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='45' text-anchor='middle' class='literal'>@</text>
    <path d='M150 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M190 40 h20'/>
    <path d='M140 40 q10 0 10 -10'/>
    <path d='M150 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M120 40 h50'/>
    <path d='M370 40 h20'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host'>host:</a></h2>
  <svg height='55' width='340'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M330.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>subdomain</text>
    <rect x='170' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M123 40 l4 3 v-6 z' class='arrow'/>
    <a href='#domain'>
    <rect x='240' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='275' y='25' text-anchor='middle' class='rule'>domain</text>
    </a>
    <path d='M40 30 v0 q0 10 10 10 h150 q10 0 10 -10 v0'/>
    <path d='M200 20 q10 0 10 10'/>
    <path d='M190 20 h50'/>
    <path d='M150 20 h20'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M310 20 h20'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='port'>port:</a></h2>
  <svg height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='70' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>number</text>
    <path d='M50 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='path'>path:</a></h2>
  <svg height='35' width='80'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M70.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>/</text>
    <path d='M50 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='attributes'>attributes:</a></h2>
  <svg height='65' width='310'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M300.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>?</text>
    <rect x='100' y='10' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>attribute-key-value</text>
    <rect x='165' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='175' y='55' text-anchor='middle' class='literal'>&amp;</text>
    <path d='M80 30 v10 q0 10 10 10 h75'/>
    <path d='M185 50 h75 q10 0 10 -10'/>
    <path d='M260 20 q10 0 10 10 v10'/>
    <path d='M250 20 h50'/>
    <path d='M80 30 q0 -10 10 -10'/>
    <path d='M50 20 h50'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='attribute-key-pair'>attribute-key-pair:</a></h2>
  <svg height='55' width='280'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='45' text-anchor='middle' class='rule'>key</text>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='130' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>=</text>
    <rect x='170' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='45' text-anchor='middle' class='rule'>value</text>
    <path d='M110 20 v10'/>
    <path d='M240 30 q0 10 10 10'/>
    <path d='M220 40 h50'/>
    <path d='M150 40 h20'/>
    <path d='M100 40 q10 0 10 -10'/>
    <path d='M110 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M80 40 h50'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"html5"} > should translate a simple ABNF - URL 2`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='nsource-list'>nsource-list:</a></h2>
  <svg height='165' width='650'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M640.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='90' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='115' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M392 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#source-expression'>
    <rect x='250' y='30' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>source-expression</text>
    </a>
    <rect x='300' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='325' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M327 90 l-4 3 v-6 z' class='arrow'/>
    <rect x='480' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='505' y='75' text-anchor='middle' class='rule'>WSP</text>
    <rect x='180' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='205' y='155' text-anchor='middle' class='rule'>WSP</text>
    <rect x='280' y='110' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='325' y='125' text-anchor='middle' class='literal'>'none'</text>
    <text x='355' y='125' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='420' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='445' y='155' text-anchor='middle' class='rule'>WSP</text>
    <path d='M610 50 v60'/>
    <path d='M400 130 v10 q0 10 10 10 h10'/>
    <path d='M470 150 h10 q10 0 10 -10'/>
    <path d='M480 120 q10 0 10 10 v10'/>
    <path d='M400 130 q0 -10 10 -10'/>
    <path d='M370 120 h230 q10 0 10 -10'/>
    <path d='M160 130 v10 q0 10 10 10 h10'/>
    <path d='M230 150 h10 q10 0 10 -10'/>
    <path d='M240 120 q10 0 10 10 v10'/>
    <path d='M160 130 q0 -10 10 -10'/>
    <path d='M40 110 q0 10 10 10 h230'/>
    <path d='M610 50 q0 -10 10 -10'/>
    <path d='M200 20 v10'/>
    <path d='M580 30 q0 10 10 10'/>
    <path d='M460 50 v10 q0 10 10 10 h10'/>
    <path d='M530 70 h10 q10 0 10 -10'/>
    <path d='M540 40 q10 0 10 10 v10'/>
    <path d='M460 50 q0 -10 10 -10'/>
    <path d='M230 50 v10 q0 10 10 10 h60'/>
    <path d='M280 80 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M360 70 q10 0 10 10'/>
    <path d='M350 70 h60 q10 0 10 -10'/>
    <path d='M280 80 q0 -10 10 -10'/>
    <path d='M410 40 q10 0 10 10 v10'/>
    <path d='M400 40 h240'/>
    <path d='M230 50 q0 -10 10 -10'/>
    <path d='M190 40 q10 0 10 -10'/>
    <path d='M200 20 q0 -10 10 -10 h360 q10 0 10 10 v10'/>
    <path d='M70 50 v10 q0 10 10 10 h10'/>
    <path d='M140 70 h10 q10 0 10 -10'/>
    <path d='M150 40 q10 0 10 10 v10'/>
    <path d='M70 50 q0 -10 10 -10'/>
    <path d='M30 40 q10 0 10 10 v60'/>
    <path d='M10 40 h240'/>
  </svg>
 </section>

 <section>
  <h2><a name='source-expression'>source-expression:</a></h2>
  <svg height='155' width='250'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M240.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme-source'>
    <rect x='60' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='25' text-anchor='middle' class='rule'>scheme-source</text>
    </a>
    <a href='#host-source'>
    <rect x='70' y='40' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='55' text-anchor='middle' class='rule'>host-source</text>
    </a>
    <a href='#keyword-source'>
    <rect x='60' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='85' text-anchor='middle' class='rule'>keyword-source</text>
    </a>
    <a href='#nonce-source'>
    <rect x='70' y='100' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='115' text-anchor='middle' class='rule'>nonce-source</text>
    </a>
    <a href='#hash-source'>
    <rect x='70' y='130' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='145' text-anchor='middle' class='rule'>hash-source</text>
    </a>
    <path d='M210 30 v100'/>
    <path d='M180 140 h20 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h20'/>
    <path d='M180 110 h20 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h20'/>
    <path d='M190 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M180 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M210 30 q0 -10 10 -10'/>
    <path d='M190 20 h50'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme-source'>scheme-source:</a></h2>
  <svg height='35' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme-part'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>scheme-part</text>
    </a>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>:</text>
    <path d='M140 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-source'>host-source:</a></h2>
  <svg height='55' width='740'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M730.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M147 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#scheme-part'>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>scheme-part</text>
    </a>
    <rect x='190' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='210' y='45' text-anchor='middle' class='literal'>://</text>
    <a href='#host-part'>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>host-part</text>
    </a>
    <path d='M467 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#port-part'>
    <rect x='420' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='465' y='45' text-anchor='middle' class='rule'>port-part</text>
    </a>
    <path d='M637 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#path-part'>
    <rect x='590' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='635' y='45' text-anchor='middle' class='rule'>path-part</text>
    </a>
    <path d='M570 20 v10'/>
    <path d='M700 30 q0 10 10 10'/>
    <path d='M680 40 h50'/>
    <path d='M560 40 q10 0 10 -10'/>
    <path d='M570 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M400 20 v10'/>
    <path d='M530 30 q0 10 10 10'/>
    <path d='M510 40 h80'/>
    <path d='M390 40 q10 0 10 -10'/>
    <path d='M400 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M370 40 h50'/>
    <path d='M40 20 v10'/>
    <path d='M250 30 q0 10 10 10'/>
    <path d='M230 40 h50'/>
    <path d='M170 40 h20'/>
    <path d='M30 40 q10 0 10 -10'/>
    <path d='M40 20 q0 -10 10 -10 h190 q10 0 10 10 v10'/>
    <path d='M10 40 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='keyword-source'>keyword-source:</a></h2>
  <svg height='95' width='300'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='105' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='150' y='25' text-anchor='middle' class='literal'>'self'</text>
    <text x='180' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='180' rx='8' ry='8' class='literal'/>
    <text x='150' y='55' text-anchor='middle' class='literal'>'unsafe-inline'</text>
    <text x='225' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='70' y='70' height='20' width='160' rx='8' ry='8' class='literal'/>
    <text x='150' y='85' text-anchor='middle' class='literal'>'unsafe-eval'</text>
    <text x='215' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M260 30 v40'/>
    <path d='M230 80 h20 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h20'/>
    <path d='M240 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M260 30 q0 -10 10 -10'/>
    <path d='M195 20 h95'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h95'/>
  </svg>
 </section>

 <section>
  <h2><a name='base64-value'>base64-value:</a></h2>
  <svg height='145' width='400'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M123 10 l4 3 v-6 z' class='arrow'/>
    <rect x='90' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='45' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='90' y='60' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='75' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='115' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='105' text-anchor='middle' class='literal'>+</text>
    <rect x='115' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='135' text-anchor='middle' class='literal'>/</text>
    <text x='305' y='100' text-anchor='middle' class='comment'>(twice at most)</text>
    <rect x='295' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='305' y='75' text-anchor='middle' class='literal'>=</text>
    <path d='M275 50 v10 q0 10 10 10 h10'/>
    <path d='M315 70 h10 q10 0 10 -10'/>
    <path d='M325 40 q10 0 10 10 v10'/>
    <path d='M275 50 q0 -10 10 -10'/>
    <path d='M40 20 v10 q0 10 10 10'/>
    <path d='M200 40 q10 0 10 -10'/>
    <path d='M180 50 v70'/>
    <path d='M135 130 h35 q10 0 10 -10'/>
    <path d='M70 120 q0 10 10 10 h35'/>
    <path d='M135 100 h35 q10 0 10 -10'/>
    <path d='M70 90 q0 10 10 10 h35'/>
    <path d='M160 70 h10 q10 0 10 -10'/>
    <path d='M70 60 q0 10 10 10 h10'/>
    <path d='M180 50 q0 -10 10 -10'/>
    <path d='M160 40 h230'/>
    <path d='M60 40 q10 0 10 10 v70'/>
    <path d='M40 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M10 40 h80'/>
  </svg>
 </section>

 <section>
  <h2><a name='nonce-value'>nonce-value:</a></h2>
  <svg height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#base64-value'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    </a>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-value'>hash-value:</a></h2>
  <svg height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#base64-value'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    </a>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='nonce-source'>nonce-source:</a></h2>
  <svg height='35' width='330'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='100' rx='8' ry='8' class='literal'/>
    <text x='80' y='25' text-anchor='middle' class='literal'>'nonce-</text>
    <text x='115' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <a href='#nonce-value'>
    <rect x='150' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='205' y='25' text-anchor='middle' class='rule'>nonce-value</text>
    </a>
    <rect x='280' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='290' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M260 20 h20'/>
    <path d='M130 20 h20'/>
    <path d='M300 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-algo'>hash-algo:</a></h2>
  <svg height='95' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='25' text-anchor='middle' class='literal'>sha256</text>
    <text x='135' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='55' text-anchor='middle' class='literal'>sha384</text>
    <text x='135' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='70' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='85' text-anchor='middle' class='literal'>sha512</text>
    <text x='135' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M170 30 v40'/>
    <path d='M150 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M150 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M170 30 q0 -10 10 -10'/>
    <path d='M150 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-source'>hash-source:</a></h2>
  <svg height='35' width='380'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M370.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>'</text>
    <a href='#hash-algo'>
    <rect x='70' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='115' y='25' text-anchor='middle' class='rule'>hash-algo</text>
    </a>
    <rect x='180' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='190' y='25' text-anchor='middle' class='literal'>-</text>
    <a href='#hash-value'>
    <rect x='220' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>hash-value</text>
    </a>
    <rect x='330' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='340' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M310 20 h20'/>
    <path d='M200 20 h20'/>
    <path d='M160 20 h20'/>
    <path d='M50 20 h20'/>
    <path d='M350 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme-part'>scheme-part:</a></h2>
  <svg height='35' width='410'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M400.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='205' y='25' text-anchor='middle' class='prose'>scheme production from RFC 3986, section 3.1</text>
    <path d='M380 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-part'>host-part:</a></h2>
  <svg height='155' width='710'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M700.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='345' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='355' y='25' text-anchor='middle' class='literal'>*</text>
    <path d='M107 40 l-4 3 v-6 z' class='arrow'/>
    <rect x='90' y='60' height='20' width='30' rx='8' ry='8' class='literal'/>
    <text x='105' y='75' text-anchor='middle' class='literal'>*.</text>
    <a href='#host-char'>
    <rect x='200' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='245' y='75' text-anchor='middle' class='rule'>host-char</text>
    </a>
    <path d='M243 90 l4 3 v-6 z' class='arrow'/>
    <rect x='400' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='410' y='105' text-anchor='middle' class='literal'>.</text>
    <a href='#host-char'>
    <rect x='470' y='90' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='515' y='105' text-anchor='middle' class='rule'>host-char</text>
    </a>
    <path d='M513 120 l4 3 v-6 z' class='arrow'/>
    <path d='M493 140 l4 3 v-6 z' class='arrow'/>
    <path d='M670 30 v30'/>
    <path d='M640 80 v10'/>
    <path d='M380 110 v20 q0 10 10 10 h210 q10 0 10 -10'/>
    <path d='M600 100 q10 0 10 10 v20'/>
    <path d='M450 110 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M570 100 q10 0 10 10'/>
    <path d='M560 100 h70 q10 0 10 -10'/>
    <path d='M450 110 q0 -10 10 -10'/>
    <path d='M420 100 h50'/>
    <path d='M380 110 q0 -10 10 -10'/>
    <path d='M350 90 q0 10 10 10 h40'/>
    <path d='M640 80 q0 -10 10 -10'/>
    <path d='M340 70 q10 0 10 10 v10'/>
    <path d='M180 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M300 70 q10 0 10 10'/>
    <path d='M290 70 h370 q10 0 10 -10'/>
    <path d='M180 80 q0 -10 10 -10'/>
    <path d='M70 50 v10'/>
    <path d='M140 60 q0 10 10 10'/>
    <path d='M120 70 h80'/>
    <path d='M60 70 q10 0 10 -10'/>
    <path d='M70 50 q0 -10 10 -10 h50 q10 0 10 10 v10'/>
    <path d='M40 60 q0 10 10 10 h40'/>
    <path d='M670 30 q0 -10 10 -10'/>
    <path d='M365 20 h335'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h335'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-char'>host-char:</a></h2>
  <svg height='95' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='60' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='85' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='85' text-anchor='middle' class='literal'>-</text>
    <path d='M150 30 v40'/>
    <path d='M105 80 h35 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h35'/>
    <path d='M130 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M130 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='path-part'>path-part:</a></h2>
  <svg height='35' width='390'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M380.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='195' y='25' text-anchor='middle' class='prose'>path production from RFC 3986, section 3.3</text>
    <path d='M360 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='port-part'>port-part:</a></h2>
  <svg height='85' width='290'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M280.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='130' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>DIGIT</text>
    <path d='M163 40 l4 3 v-6 z' class='arrow'/>
    <rect x='155' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='165' y='75' text-anchor='middle' class='literal'>*</text>
    <path d='M250 30 v30'/>
    <path d='M175 70 h65 q10 0 10 -10'/>
    <path d='M80 60 q0 10 10 10 h65'/>
    <path d='M250 30 q0 -10 10 -10'/>
    <path d='M110 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M210 20 q10 0 10 10'/>
    <path d='M200 20 h80'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M70 20 q10 0 10 10 v30'/>
    <path d='M50 20 h80'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"html5"} > should translate a simple ABNF - URL 3`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='letter'>letter:</a></h2>
  <svg height='145' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>A</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>Z</text>
    <rect x='60' y='80' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='95' text-anchor='middle' class='literal'>a</text>
    <line x1='70' y1='105' x2='70' y2='115' class='ellipsis'/>    <rect x='60' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='135' text-anchor='middle' class='literal'>z</text>
    <path d='M100 30 v90'/>
    <path d='M80 130 h10 q10 0 10 -10'/>
    <path d='M40 120 q0 10 10 10 h10'/>
    <path d='M80 90 h10 q10 0 10 -10'/>
    <path d='M40 80 q0 10 10 10 h10'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v90'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='digit'>digit:</a></h2>
  <svg height='75' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>0</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>9</text>
    <path d='M100 30 v20'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v20'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='symbol'>symbol:</a></h2>
  <svg height='405' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>"</text>
    <rect x='60' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='55' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>(</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>,</text>
    <rect x='60' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='175' text-anchor='middle' class='literal'>.</text>
    <rect x='60' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='205' text-anchor='middle' class='literal'>;</text>
    <line x1='70' y1='215' x2='70' y2='225' class='ellipsis'/>    <rect x='60' y='230' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='245' text-anchor='middle' class='literal'>&gt;</text>
    <rect x='60' y='260' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='275' text-anchor='middle' class='literal'>[</text>
    <rect x='60' y='290' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='305' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='320' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='335' text-anchor='middle' class='literal'>{</text>
    <rect x='60' y='350' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='365' text-anchor='middle' class='literal'>|</text>
    <rect x='60' y='380' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='395' text-anchor='middle' class='literal'>}</text>
    <path d='M100 30 v350'/>
    <path d='M80 390 h10 q10 0 10 -10'/>
    <path d='M40 380 q0 10 10 10 h10'/>
    <path d='M80 360 h10 q10 0 10 -10'/>
    <path d='M40 350 q0 10 10 10 h10'/>
    <path d='M80 330 h10 q10 0 10 -10'/>
    <path d='M40 320 q0 10 10 10 h10'/>
    <path d='M80 300 h10 q10 0 10 -10'/>
    <path d='M40 290 q0 10 10 10 h10'/>
    <path d='M80 270 h10 q10 0 10 -10'/>
    <path d='M40 260 q0 10 10 10 h10'/>
    <path d='M80 240 h10 q10 0 10 -10'/>
    <path d='M40 230 q0 10 10 10 h10'/>
    <path d='M80 200 h10 q10 0 10 -10'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M80 170 h10 q10 0 10 -10'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M80 140 h10 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M80 110 h10 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M80 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M80 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v350'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='character'>character:</a></h2>
  <svg height='125' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#letter'>
    <rect x='70' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#digit'>
    <rect x='70' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>digit</text>
    </a>
    <a href='#symbol'>
    <rect x='60' y='70' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='85' text-anchor='middle' class='rule'>symbol</text>
    </a>
    <rect x='85' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M150 30 v70'/>
    <path d='M105 110 h35 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h35'/>
    <path d='M130 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M120 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M120 20 h60'/>
    <path d='M30 20 q10 0 10 10 v70'/>
    <path d='M10 20 h60'/>
  </svg>
 </section>

 <section>
  <h2><a name='identifier'>identifier:</a></h2>
  <svg height='125' width='300'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#letter'>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#letter'>
    <rect x='160' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='55' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#digit'>
    <rect x='160' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='85' text-anchor='middle' class='rule'>digit</text>
    </a>
    <rect x='175' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='185' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M110 30 v10 q0 10 10 10 h40'/>
    <path d='M230 60 v40'/>
    <path d='M195 110 h25 q10 0 10 -10'/>
    <path d='M140 100 q0 10 10 10 h25'/>
    <path d='M210 80 h10 q10 0 10 -10'/>
    <path d='M140 70 q0 10 10 10 h10'/>
    <path d='M230 60 q0 -10 10 -10'/>
    <path d='M210 50 h40 q10 0 10 -10'/>
    <path d='M130 50 q10 0 10 10 v40'/>
    <path d='M250 20 q10 0 10 10 v10'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h210'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='terminal'>terminal:</a></h2>
  <svg height='105' width='350'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M340.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>'</text>
    <a href='#character'>
    <rect x='130' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>character</text>
    </a>
    <path d='M173 40 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='25' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='75' text-anchor='middle' class='literal'>"</text>
    <a href='#character'>
    <rect x='130' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='75' text-anchor='middle' class='rule'>character</text>
    </a>
    <path d='M173 90 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='75' text-anchor='middle' class='literal'>"</text>
    <path d='M310 30 v30'/>
    <path d='M290 70 h10 q10 0 10 -10'/>
    <path d='M110 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 70 q10 0 10 10'/>
    <path d='M220 70 h50'/>
    <path d='M110 80 q0 -10 10 -10'/>
    <path d='M80 70 h50'/>
    <path d='M40 60 q0 10 10 10 h10'/>
    <path d='M310 30 q0 -10 10 -10'/>
    <path d='M290 20 h50'/>
    <path d='M110 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 20 q10 0 10 10'/>
    <path d='M220 20 h50'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='lhs'>lhs:</a></h2>
  <svg height='35' width='150'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M140.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#identifier'>
    <rect x='30' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='25' text-anchor='middle' class='rule'>identifier</text>
    </a>
    <path d='M120 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='rhs'>rhs:</a></h2>
  <svg height='215' width='280'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#identifier'>
    <rect x='95' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='140' y='25' text-anchor='middle' class='rule'>identifier</text>
    </a>
    <a href='#terminal'>
    <rect x='105' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='140' y='55' text-anchor='middle' class='rule'>terminal</text>
    </a>
    <rect x='75' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='85' text-anchor='middle' class='literal'>[</text>
    <a href='#rhs'>
    <rect x='115' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='85' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='75' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='115' text-anchor='middle' class='literal'>{</text>
    <a href='#rhs'>
    <rect x='115' y='100' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='115' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='115' text-anchor='middle' class='literal'>}</text>
    <rect x='75' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='145' text-anchor='middle' class='literal'>(</text>
    <a href='#rhs'>
    <rect x='115' y='130' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='145' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='145' text-anchor='middle' class='literal'>)</text>
    <a href='#rhs'>
    <rect x='60' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='175' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='130' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='175' text-anchor='middle' class='literal'>|</text>
    <a href='#rhs'>
    <rect x='170' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='175' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <a href='#rhs'>
    <rect x='60' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='205' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='130' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='205' text-anchor='middle' class='literal'>,</text>
    <a href='#rhs'>
    <rect x='170' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='205' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <path d='M240 30 v160'/>
    <path d='M220 200 h10 q10 0 10 -10'/>
    <path d='M150 200 h20'/>
    <path d='M110 200 h20'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M220 170 h10 q10 0 10 -10'/>
    <path d='M150 170 h20'/>
    <path d='M110 170 h20'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M205 140 h25 q10 0 10 -10'/>
    <path d='M165 140 h20'/>
    <path d='M95 140 h20'/>
    <path d='M40 130 q0 10 10 10 h25'/>
    <path d='M205 110 h25 q10 0 10 -10'/>
    <path d='M165 110 h20'/>
    <path d='M95 110 h20'/>
    <path d='M40 100 q0 10 10 10 h25'/>
    <path d='M205 80 h25 q10 0 10 -10'/>
    <path d='M165 80 h20'/>
    <path d='M95 80 h20'/>
    <path d='M40 70 q0 10 10 10 h25'/>
    <path d='M175 50 h55 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h55'/>
    <path d='M240 30 q0 -10 10 -10'/>
    <path d='M185 20 h85'/>
    <path d='M30 20 q10 0 10 10 v160'/>
    <path d='M10 20 h85'/>
  </svg>
 </section>

 <section>
  <h2><a name='rule'>rule:</a></h2>
  <svg height='35' width='260'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M250.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#lhs'>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>lhs</text>
    </a>
    <rect x='100' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='110' y='25' text-anchor='middle' class='literal'>=</text>
    <a href='#rhs'>
    <rect x='140' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='210' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='220' y='25' text-anchor='middle' class='literal'>;</text>
    <path d='M190 20 h20'/>
    <path d='M120 20 h20'/>
    <path d='M80 20 h20'/>
    <path d='M230 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='grammar'>grammar:</a></h2>
  <svg height='55' width='170'>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 4 v12 m 4 0 v-12' class='station'/>
    <a href='#rule'>
    <rect x='60' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='45' text-anchor='middle' class='rule'>rule</text>
    </a>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M110 40 h10 q10 0 10 -10'/>
    <path d='M120 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h150'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"html5"} > should translate a simple ABNF - URL 4`] = `
"<!DOCTYPE html>
<html>

 <head>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='SYNTAX'>SYNTAX:</a></h2>
  <svg height='55' width='230'>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M220.5 4 v12 m 4 0 v-12' class='station'/>
    <a href='#PRODUCTION'>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>PRODUCTION</text>
    </a>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M170 40 h10 q10 0 10 -10'/>
    <path d='M180 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h210'/>
  </svg>
 </section>

 <section>
  <h2><a name='PRODUCTION'>PRODUCTION:</a></h2>
  <svg height='35' width='400'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#IDENTIFIER'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    </a>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>=</text>
    <a href='#EXPRESSION'>
    <rect x='200' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='350' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M330 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M370 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='EXPRESSION'>EXPRESSION:</a></h2>
  <svg height='65' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#TERM'>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>TERM</text>
    </a>
    <rect x='85' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='55' text-anchor='middle' class='literal'>|</text>
    <path d='M40 30 v10 q0 10 10 10 h35'/>
    <path d='M105 50 h35 q10 0 10 -10'/>
    <path d='M140 20 q10 0 10 10 v10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='TERM'>TERM:</a></h2>
  <svg height='55' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#FACTOR'>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>FACTOR</text>
    </a>
    <path d='M93 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M140 20 q10 0 10 10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='FACTOR'>FACTOR:</a></h2>
  <svg height='155' width='330'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#IDENTIFIER'>
    <rect x='110' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    </a>
    <a href='#LITERAL'>
    <rect x='120' y='40' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='165' y='55' text-anchor='middle' class='rule'>LITERAL</text>
    </a>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>[</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='85' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>(</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='100' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='115' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>{</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='130' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='145' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='145' text-anchor='middle' class='literal'>}</text>
    <path d='M290 30 v100'/>
    <path d='M270 140 h10 q10 0 10 -10'/>
    <path d='M230 140 h20'/>
    <path d='M80 140 h20'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M270 110 h10 q10 0 10 -10'/>
    <path d='M230 110 h20'/>
    <path d='M80 110 h20'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M270 80 h10 q10 0 10 -10'/>
    <path d='M230 80 h20'/>
    <path d='M80 80 h20'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M210 50 h70 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h70'/>
    <path d='M290 30 q0 -10 10 -10'/>
    <path d='M220 20 h100'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h100'/>
  </svg>
 </section>

 <section>
  <h2><a name='IDENTIFIER'>IDENTIFIER:</a></h2>
  <svg height='55' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>letter</text>
    <path d='M83 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M120 20 q10 0 10 10'/>
    <path d='M110 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='LITERAL'>LITERAL:</a></h2>
  <svg height='55' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>character</text>
    <path d='M103 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M160 20 q10 0 10 10'/>
    <path d='M150 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"iso-ebnf"} > should translate a simple ABNF - URL 1`] = `
"URL = domain, [ path ] , [ attributes ] , [ fragment ] 
	;

domain = scheme, "://", [ credential ] , host, [ port ] 
	;

"
`;

exports[`Grammar expression translation > With options {"output":"iso-ebnf"} > should translate a simple ABNF - URL 2`] = `
"scheme =nsource-list = [ WSP ] , [ source-expression [ WSP source-expression ]  [ WSP ]  ] 
"
`;

exports[`Grammar expression translation > With options {"output":"iso-ebnf"} > should translate a simple ABNF - URL 3`] = `
"	| [ WSP ] ,letter = "A"
	| "B"
	| "C"
	| "D"
	| "E"
	| "F"
	| "G"
	| "H"
	| "I"
	| "J"
	| "K"
	| "L"
	| "M"
	| "N"
	| "O"
	| "P"
	| "Q"
	| "R"
	| "S"
	| "T"
	| "U"
	| "V"
	| "W"
	| "X"
	| "Y"
	| "Z"
	| "a"
	| "b"
	| "c"
	| "d"
	| "e"
	| "f"
	| "g"
	| "h"
	| "i"
	| "j"
	| "k"
	| "l"
	| "m"
	| "n"
	| "o"
	| "p"
	| "q"
	| "r"
	| "s"
	| "t"
	| "u"
	| "v"
	| "w"
	| "x"
	| "y"
	| "z"
	;

digit = "0"
	| "1"
	| "2"
	| "3"
	| "4"
	| "5"
	| "6"
	| "7"
	| "8"
	| "9"
	;

symbol = "["
	| "]"
	| "{"
	| "}"
	| "("
	| ")"
	| "<"
	| ">"
	| "'"
	| """"
	| "="
	| "|"
	| "."
	| ","
	| ";"
	;

character = letter
	| digit
	| symbol
	| "_"
	;

identifier = letter, [ letter | digit | "_" ] 
	;

terminal = "'", character, [ character ] , "'"
	| """", character, [ character ] , """"
	;

lhs = identifier
	;

rhs = identifier
	| terminal
	| "[", rhs, "]"
	| "{", rhs, "}"
	| "(", rhs, ")"
	| rhs, "|", rhs
	| rhs, ",", rhs
	;

rule = lhs, "=", rhs, ";"
	;

grammar = [ rule ] 
	;

"
`;

exports[`Grammar expression translation > With options {"output":"iso-ebnf"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX = [ PRODUCTION ] 
	;

PRODUCTION = IDENTIFIER, "=", EXPRESSION, "."
	;

EXPRESSION = TERM, [ "|" TERM ] 
	;

TERM = FACTOR, [ FACTOR ] 
	;

FACTOR = IDENTIFIER
	| LITERAL
	| "[", EXPRESSION, "]"
	| "(", EXPRESSION, ")"
	| "{", EXPRESSION, "}"
	;

IDENTIFIER = letter, [ letter ] 
	;

LITERAL = "", "", character, [ character ] , "", ""
	;

"
`;

exports[`Grammar expression translation > With options {"output":"rbnf"} > should translate a simple ABNF - URL 1`] = `
"<URL> ::= <domain> [ <path> ]  [ <attributes> ]  [ <fragment> ] 

"
`;

exports[`Grammar expression translation > With options {"output":"rbnf"} > should translate a simple ABNF - URL 2`] = `
"<domain> ::= <scheme><nsource-list> ::= [ <WSP> ]  [ <source-expression> [ <WSP> <source-expression> ]  [ <WSP> ]  ] 
"
`;

exports[`Grammar expression translation > With options {"output":"rbnf"} > should translate a simple ABNF - URL 3`] = `""`;

exports[`Grammar expression translation > With options {"output":"rbnf"} > should translate a simple ABNF - URL 4`] = `
"	| [ <WSP> ] <letter> ::=<SYNTAX> ::= [ <PRODUCTION> ] 

"
`;

exports[`Grammar expression translation > With options {"output":"svg"} > should translate a simple ABNF - URL 1`] = `
"<?xml version='1.0' encoding='utf-8'?>
<svg
  xmlns='http://www.w3.org/2000/svg'
  xmlns:xlink='http://www.w3.org/1999/xlink'

  width='660' height='990'>

  <style>
    rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
    rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
    path { fill: transparent; }
    text.literal { font-family: monospace; }
    line.ellipsis { stroke-dasharray: 1 3.5; }
    tspan.hex { font-family: monospace; font-size: 90%; }
    path.arrow { fill: black; }
  </style>

  <g transform='translate(40 50)'>
    <text x='-30' y='-10'>URL:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M590.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>domain</text>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='150' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='175' y='45' text-anchor='middle' class='rule'>path</text>
    <path d='M327 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>attributes</text>
    <path d='M497 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='450' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='495' y='45' text-anchor='middle' class='rule'>fragment</text>
    <path d='M430 20 v10'/>
    <path d='M560 30 q0 10 10 10'/>
    <path d='M540 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M260 20 v10'/>
    <path d='M390 30 q0 10 10 10'/>
    <path d='M370 40 h80'/>
    <path d='M250 40 q10 0 10 -10'/>
    <path d='M260 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M130 20 v10'/>
    <path d='M220 30 q0 10 10 10'/>
    <path d='M200 40 h80'/>
    <path d='M120 40 q10 0 10 -10'/>
    <path d='M130 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M100 40 h50'/>
    <path d='M10 40 h20'/>
  </g>

  <g transform='translate(40 150)'>
    <text x='-30' y='-10'>domain:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M550.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>scheme</text>
    <rect x='120' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>://</text>
    <path d='M257 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>credential</text>
    <rect x='350' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='375' y='45' text-anchor='middle' class='rule'>host</text>
    <path d='M477 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='450' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='475' y='45' text-anchor='middle' class='rule'>port</text>
    <path d='M430 20 v10'/>
    <path d='M520 30 q0 10 10 10'/>
    <path d='M500 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M400 40 h50'/>
    <path d='M190 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M180 40 q10 0 10 -10'/>
    <path d='M190 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M160 40 h50'/>
    <path d='M100 40 h20'/>
    <path d='M10 40 h20'/>
  </g>

  <g transform='translate(40 250)'>
    <text x='-30' y='-10'>scheme:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M190.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='65' y='10' height='20' width='70' rx='8' ry='8' class='literal'/>
    <text x='100' y='25' text-anchor='middle' class='literal'>http</text>
    <text x='120' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='80' rx='8' ry='8' class='literal'/>
    <text x='100' y='55' text-anchor='middle' class='literal'>https</text>
    <text x='125' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M160 30 v10'/>
    <path d='M140 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M160 30 q0 -10 10 -10'/>
    <path d='M135 20 h55'/>
    <path d='M30 20 q10 0 10 10 v10'/>
    <path d='M10 20 h55'/>
  </g>

  <g transform='translate(40 360)'>
    <text x='-30' y='-10'>credential:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='45' text-anchor='middle' class='rule'>username</text>
    <path d='M237 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='170' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='45' text-anchor='middle' class='literal'>:</text>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>password</text>
    <rect x='350' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='45' text-anchor='middle' class='literal'>@</text>
    <path d='M150 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M190 40 h20'/>
    <path d='M140 40 q10 0 10 -10'/>
    <path d='M150 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M120 40 h50'/>
    <path d='M370 40 h20'/>
    <path d='M10 40 h20'/>
  </g>

  <g transform='translate(40 460)'>
    <text x='-30' y='-10'>host:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M330.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>subdomain</text>
    <rect x='170' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M123 40 l4 3 v-6 z' class='arrow'/>
    <rect x='240' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='275' y='25' text-anchor='middle' class='rule'>domain</text>
    <path d='M40 30 v0 q0 10 10 10 h150 q10 0 10 -10 v0'/>
    <path d='M200 20 q10 0 10 10'/>
    <path d='M190 20 h50'/>
    <path d='M150 20 h20'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M310 20 h20'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 560)'>
    <text x='-30' y='-10'>port:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='70' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>number</text>
    <path d='M50 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 640)'>
    <text x='-30' y='-10'>path:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M70.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>/</text>
    <path d='M50 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 720)'>
    <text x='-30' y='-10'>attributes:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M300.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>?</text>
    <rect x='100' y='10' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>attribute-key-value</text>
    <rect x='165' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='175' y='55' text-anchor='middle' class='literal'>&amp;</text>
    <path d='M80 30 v10 q0 10 10 10 h75'/>
    <path d='M185 50 h75 q10 0 10 -10'/>
    <path d='M260 20 q10 0 10 10 v10'/>
    <path d='M250 20 h50'/>
    <path d='M80 30 q0 -10 10 -10'/>
    <path d='M50 20 h50'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 830)'>
    <text x='-30' y='-10'>attribute-key-pair:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='45' text-anchor='middle' class='rule'>key</text>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='130' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>=</text>
    <rect x='170' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='45' text-anchor='middle' class='rule'>value</text>
    <path d='M110 20 v10'/>
    <path d='M240 30 q0 10 10 10'/>
    <path d='M220 40 h50'/>
    <path d='M150 40 h20'/>
    <path d='M100 40 q10 0 10 -10'/>
    <path d='M110 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M80 40 h50'/>
    <path d='M10 40 h20'/>
  </g>

</svg>
"
`;

exports[`Grammar expression translation > With options {"output":"svg"} > should translate a simple ABNF - URL 2`] = `
"<?xml version='1.0' encoding='utf-8'?>
<svg
  xmlns='http://www.w3.org/2000/svg'
  xmlns:xlink='http://www.w3.org/1999/xlink'

  width='800' height='2120'>

  <style>
    rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
    rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
    path { fill: transparent; }
    text.literal { font-family: monospace; }
    line.ellipsis { stroke-dasharray: 1 3.5; }
    tspan.hex { font-family: monospace; font-size: 90%; }
    path.arrow { fill: black; }
  </style>

  <g transform='translate(40 50)'>
    <text x='-30' y='-10'>nsource-list:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M640.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='90' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='115' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M392 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='250' y='30' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>source-expression</text>
    <rect x='300' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='325' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M327 90 l-4 3 v-6 z' class='arrow'/>
    <rect x='480' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='505' y='75' text-anchor='middle' class='rule'>WSP</text>
    <rect x='180' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='205' y='155' text-anchor='middle' class='rule'>WSP</text>
    <rect x='280' y='110' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='325' y='125' text-anchor='middle' class='literal'>'none'</text>
    <text x='355' y='125' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='420' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='445' y='155' text-anchor='middle' class='rule'>WSP</text>
    <path d='M610 50 v60'/>
    <path d='M400 130 v10 q0 10 10 10 h10'/>
    <path d='M470 150 h10 q10 0 10 -10'/>
    <path d='M480 120 q10 0 10 10 v10'/>
    <path d='M400 130 q0 -10 10 -10'/>
    <path d='M370 120 h230 q10 0 10 -10'/>
    <path d='M160 130 v10 q0 10 10 10 h10'/>
    <path d='M230 150 h10 q10 0 10 -10'/>
    <path d='M240 120 q10 0 10 10 v10'/>
    <path d='M160 130 q0 -10 10 -10'/>
    <path d='M40 110 q0 10 10 10 h230'/>
    <path d='M610 50 q0 -10 10 -10'/>
    <path d='M200 20 v10'/>
    <path d='M580 30 q0 10 10 10'/>
    <path d='M460 50 v10 q0 10 10 10 h10'/>
    <path d='M530 70 h10 q10 0 10 -10'/>
    <path d='M540 40 q10 0 10 10 v10'/>
    <path d='M460 50 q0 -10 10 -10'/>
    <path d='M230 50 v10 q0 10 10 10 h60'/>
    <path d='M280 80 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M360 70 q10 0 10 10'/>
    <path d='M350 70 h60 q10 0 10 -10'/>
    <path d='M280 80 q0 -10 10 -10'/>
    <path d='M410 40 q10 0 10 10 v10'/>
    <path d='M400 40 h240'/>
    <path d='M230 50 q0 -10 10 -10'/>
    <path d='M190 40 q10 0 10 -10'/>
    <path d='M200 20 q0 -10 10 -10 h360 q10 0 10 10 v10'/>
    <path d='M70 50 v10 q0 10 10 10 h10'/>
    <path d='M140 70 h10 q10 0 10 -10'/>
    <path d='M150 40 q10 0 10 10 v10'/>
    <path d='M70 50 q0 -10 10 -10'/>
    <path d='M30 40 q10 0 10 10 v60'/>
    <path d='M10 40 h240'/>
  </g>

  <g transform='translate(40 260)'>
    <text x='-30' y='-10'>source-expression:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M240.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='25' text-anchor='middle' class='rule'>scheme-source</text>
    <rect x='70' y='40' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='55' text-anchor='middle' class='rule'>host-source</text>
    <rect x='60' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='85' text-anchor='middle' class='rule'>keyword-source</text>
    <rect x='70' y='100' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='115' text-anchor='middle' class='rule'>nonce-source</text>
    <rect x='70' y='130' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='145' text-anchor='middle' class='rule'>hash-source</text>
    <path d='M210 30 v100'/>
    <path d='M180 140 h20 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h20'/>
    <path d='M180 110 h20 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h20'/>
    <path d='M190 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M180 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M210 30 q0 -10 10 -10'/>
    <path d='M190 20 h50'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 460)'>
    <text x='-30' y='-10'>scheme-source:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>scheme-part</text>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>:</text>
    <path d='M140 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 540)'>
    <text x='-30' y='-10'>host-source:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M730.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M147 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>scheme-part</text>
    <rect x='190' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='210' y='45' text-anchor='middle' class='literal'>://</text>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>host-part</text>
    <path d='M467 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='420' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='465' y='45' text-anchor='middle' class='rule'>port-part</text>
    <path d='M637 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='590' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='635' y='45' text-anchor='middle' class='rule'>path-part</text>
    <path d='M570 20 v10'/>
    <path d='M700 30 q0 10 10 10'/>
    <path d='M680 40 h50'/>
    <path d='M560 40 q10 0 10 -10'/>
    <path d='M570 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M400 20 v10'/>
    <path d='M530 30 q0 10 10 10'/>
    <path d='M510 40 h80'/>
    <path d='M390 40 q10 0 10 -10'/>
    <path d='M400 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M370 40 h50'/>
    <path d='M40 20 v10'/>
    <path d='M250 30 q0 10 10 10'/>
    <path d='M230 40 h50'/>
    <path d='M170 40 h20'/>
    <path d='M30 40 q10 0 10 -10'/>
    <path d='M40 20 q0 -10 10 -10 h190 q10 0 10 10 v10'/>
    <path d='M10 40 h50'/>
  </g>

  <g transform='translate(40 640)'>
    <text x='-30' y='-10'>keyword-source:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='105' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='150' y='25' text-anchor='middle' class='literal'>'self'</text>
    <text x='180' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='180' rx='8' ry='8' class='literal'/>
    <text x='150' y='55' text-anchor='middle' class='literal'>'unsafe-inline'</text>
    <text x='225' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='70' y='70' height='20' width='160' rx='8' ry='8' class='literal'/>
    <text x='150' y='85' text-anchor='middle' class='literal'>'unsafe-eval'</text>
    <text x='215' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M260 30 v40'/>
    <path d='M230 80 h20 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h20'/>
    <path d='M240 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M260 30 q0 -10 10 -10'/>
    <path d='M195 20 h95'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h95'/>
  </g>

  <g transform='translate(40 780)'>
    <text x='-30' y='-10'>base64-value:</text>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M123 10 l4 3 v-6 z' class='arrow'/>
    <rect x='90' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='45' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='90' y='60' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='75' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='115' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='105' text-anchor='middle' class='literal'>+</text>
    <rect x='115' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='135' text-anchor='middle' class='literal'>/</text>
    <text x='305' y='100' text-anchor='middle' class='comment'>(twice at most)</text>
    <rect x='295' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='305' y='75' text-anchor='middle' class='literal'>=</text>
    <path d='M275 50 v10 q0 10 10 10 h10'/>
    <path d='M315 70 h10 q10 0 10 -10'/>
    <path d='M325 40 q10 0 10 10 v10'/>
    <path d='M275 50 q0 -10 10 -10'/>
    <path d='M40 20 v10 q0 10 10 10'/>
    <path d='M200 40 q10 0 10 -10'/>
    <path d='M180 50 v70'/>
    <path d='M135 130 h35 q10 0 10 -10'/>
    <path d='M70 120 q0 10 10 10 h35'/>
    <path d='M135 100 h35 q10 0 10 -10'/>
    <path d='M70 90 q0 10 10 10 h35'/>
    <path d='M160 70 h10 q10 0 10 -10'/>
    <path d='M70 60 q0 10 10 10 h10'/>
    <path d='M180 50 q0 -10 10 -10'/>
    <path d='M160 40 h230'/>
    <path d='M60 40 q10 0 10 10 v70'/>
    <path d='M40 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M10 40 h80'/>
  </g>

  <g transform='translate(40 970)'>
    <text x='-30' y='-10'>nonce-value:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1050)'>
    <text x='-30' y='-10'>hash-value:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1130)'>
    <text x='-30' y='-10'>nonce-source:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='100' rx='8' ry='8' class='literal'/>
    <text x='80' y='25' text-anchor='middle' class='literal'>'nonce-</text>
    <text x='115' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='150' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='205' y='25' text-anchor='middle' class='rule'>nonce-value</text>
    <rect x='280' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='290' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M260 20 h20'/>
    <path d='M130 20 h20'/>
    <path d='M300 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1210)'>
    <text x='-30' y='-10'>hash-algo:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='25' text-anchor='middle' class='literal'>sha256</text>
    <text x='135' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='55' text-anchor='middle' class='literal'>sha384</text>
    <text x='135' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='70' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='85' text-anchor='middle' class='literal'>sha512</text>
    <text x='135' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M170 30 v40'/>
    <path d='M150 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M150 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M170 30 q0 -10 10 -10'/>
    <path d='M150 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 1350)'>
    <text x='-30' y='-10'>hash-source:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M370.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>'</text>
    <rect x='70' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='115' y='25' text-anchor='middle' class='rule'>hash-algo</text>
    <rect x='180' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='190' y='25' text-anchor='middle' class='literal'>-</text>
    <rect x='220' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>hash-value</text>
    <rect x='330' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='340' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M310 20 h20'/>
    <path d='M200 20 h20'/>
    <path d='M160 20 h20'/>
    <path d='M50 20 h20'/>
    <path d='M350 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1430)'>
    <text x='-30' y='-10'>scheme-part:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M400.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='205' y='25' text-anchor='middle' class='prose'>scheme production from RFC 3986, section 3.1</text>
    <path d='M380 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1510)'>
    <text x='-30' y='-10'>host-part:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M700.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='345' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='355' y='25' text-anchor='middle' class='literal'>*</text>
    <path d='M107 40 l-4 3 v-6 z' class='arrow'/>
    <rect x='90' y='60' height='20' width='30' rx='8' ry='8' class='literal'/>
    <text x='105' y='75' text-anchor='middle' class='literal'>*.</text>
    <rect x='200' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='245' y='75' text-anchor='middle' class='rule'>host-char</text>
    <path d='M243 90 l4 3 v-6 z' class='arrow'/>
    <rect x='400' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='410' y='105' text-anchor='middle' class='literal'>.</text>
    <rect x='470' y='90' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='515' y='105' text-anchor='middle' class='rule'>host-char</text>
    <path d='M513 120 l4 3 v-6 z' class='arrow'/>
    <path d='M493 140 l4 3 v-6 z' class='arrow'/>
    <path d='M670 30 v30'/>
    <path d='M640 80 v10'/>
    <path d='M380 110 v20 q0 10 10 10 h210 q10 0 10 -10'/>
    <path d='M600 100 q10 0 10 10 v20'/>
    <path d='M450 110 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M570 100 q10 0 10 10'/>
    <path d='M560 100 h70 q10 0 10 -10'/>
    <path d='M450 110 q0 -10 10 -10'/>
    <path d='M420 100 h50'/>
    <path d='M380 110 q0 -10 10 -10'/>
    <path d='M350 90 q0 10 10 10 h40'/>
    <path d='M640 80 q0 -10 10 -10'/>
    <path d='M340 70 q10 0 10 10 v10'/>
    <path d='M180 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M300 70 q10 0 10 10'/>
    <path d='M290 70 h370 q10 0 10 -10'/>
    <path d='M180 80 q0 -10 10 -10'/>
    <path d='M70 50 v10'/>
    <path d='M140 60 q0 10 10 10'/>
    <path d='M120 70 h80'/>
    <path d='M60 70 q10 0 10 -10'/>
    <path d='M70 50 q0 -10 10 -10 h50 q10 0 10 10 v10'/>
    <path d='M40 60 q0 10 10 10 h40'/>
    <path d='M670 30 q0 -10 10 -10'/>
    <path d='M365 20 h335'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h335'/>
  </g>

  <g transform='translate(40 1710)'>
    <text x='-30' y='-10'>host-char:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='60' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='85' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='85' text-anchor='middle' class='literal'>-</text>
    <path d='M150 30 v40'/>
    <path d='M105 80 h35 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h35'/>
    <path d='M130 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M130 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 1850)'>
    <text x='-30' y='-10'>path-part:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M380.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='195' y='25' text-anchor='middle' class='prose'>path production from RFC 3986, section 3.3</text>
    <path d='M360 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1930)'>
    <text x='-30' y='-10'>port-part:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M280.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='130' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>DIGIT</text>
    <path d='M163 40 l4 3 v-6 z' class='arrow'/>
    <rect x='155' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='165' y='75' text-anchor='middle' class='literal'>*</text>
    <path d='M250 30 v30'/>
    <path d='M175 70 h65 q10 0 10 -10'/>
    <path d='M80 60 q0 10 10 10 h65'/>
    <path d='M250 30 q0 -10 10 -10'/>
    <path d='M110 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M210 20 q10 0 10 10'/>
    <path d='M200 20 h80'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M70 20 q10 0 10 10 v30'/>
    <path d='M50 20 h80'/>
    <path d='M10 20 h20'/>
  </g>

</svg>
"
`;

exports[`Grammar expression translation > With options {"output":"svg"} > should translate a simple ABNF - URL 3`] = `
"<?xml version='1.0' encoding='utf-8'?>
<svg
  xmlns='http://www.w3.org/2000/svg'
  xmlns:xlink='http://www.w3.org/1999/xlink'

  width='410' height='1880'>

  <style>
    rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
    rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
    path { fill: transparent; }
    text.literal { font-family: monospace; }
    line.ellipsis { stroke-dasharray: 1 3.5; }
    tspan.hex { font-family: monospace; font-size: 90%; }
    path.arrow { fill: black; }
  </style>

  <g transform='translate(40 50)'>
    <text x='-30' y='-10'>letter:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>A</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>Z</text>
    <rect x='60' y='80' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='95' text-anchor='middle' class='literal'>a</text>
    <line x1='70' y1='105' x2='70' y2='115' class='ellipsis'/>    <rect x='60' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='135' text-anchor='middle' class='literal'>z</text>
    <path d='M100 30 v90'/>
    <path d='M80 130 h10 q10 0 10 -10'/>
    <path d='M40 120 q0 10 10 10 h10'/>
    <path d='M80 90 h10 q10 0 10 -10'/>
    <path d='M40 80 q0 10 10 10 h10'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v90'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 240)'>
    <text x='-30' y='-10'>digit:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>0</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>9</text>
    <path d='M100 30 v20'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v20'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 360)'>
    <text x='-30' y='-10'>symbol:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>"</text>
    <rect x='60' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='55' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>(</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>,</text>
    <rect x='60' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='175' text-anchor='middle' class='literal'>.</text>
    <rect x='60' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='205' text-anchor='middle' class='literal'>;</text>
    <line x1='70' y1='215' x2='70' y2='225' class='ellipsis'/>    <rect x='60' y='230' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='245' text-anchor='middle' class='literal'>&gt;</text>
    <rect x='60' y='260' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='275' text-anchor='middle' class='literal'>[</text>
    <rect x='60' y='290' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='305' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='320' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='335' text-anchor='middle' class='literal'>{</text>
    <rect x='60' y='350' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='365' text-anchor='middle' class='literal'>|</text>
    <rect x='60' y='380' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='395' text-anchor='middle' class='literal'>}</text>
    <path d='M100 30 v350'/>
    <path d='M80 390 h10 q10 0 10 -10'/>
    <path d='M40 380 q0 10 10 10 h10'/>
    <path d='M80 360 h10 q10 0 10 -10'/>
    <path d='M40 350 q0 10 10 10 h10'/>
    <path d='M80 330 h10 q10 0 10 -10'/>
    <path d='M40 320 q0 10 10 10 h10'/>
    <path d='M80 300 h10 q10 0 10 -10'/>
    <path d='M40 290 q0 10 10 10 h10'/>
    <path d='M80 270 h10 q10 0 10 -10'/>
    <path d='M40 260 q0 10 10 10 h10'/>
    <path d='M80 240 h10 q10 0 10 -10'/>
    <path d='M40 230 q0 10 10 10 h10'/>
    <path d='M80 200 h10 q10 0 10 -10'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M80 170 h10 q10 0 10 -10'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M80 140 h10 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M80 110 h10 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M80 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M80 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v350'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 810)'>
    <text x='-30' y='-10'>character:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='70' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>letter</text>
    <rect x='70' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>digit</text>
    <rect x='60' y='70' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='85' text-anchor='middle' class='rule'>symbol</text>
    <rect x='85' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M150 30 v70'/>
    <path d='M105 110 h35 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h35'/>
    <path d='M130 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M120 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M120 20 h60'/>
    <path d='M30 20 q10 0 10 10 v70'/>
    <path d='M10 20 h60'/>
  </g>

  <g transform='translate(40 980)'>
    <text x='-30' y='-10'>identifier:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>letter</text>
    <rect x='160' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='55' text-anchor='middle' class='rule'>letter</text>
    <rect x='160' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='85' text-anchor='middle' class='rule'>digit</text>
    <rect x='175' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='185' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M110 30 v10 q0 10 10 10 h40'/>
    <path d='M230 60 v40'/>
    <path d='M195 110 h25 q10 0 10 -10'/>
    <path d='M140 100 q0 10 10 10 h25'/>
    <path d='M210 80 h10 q10 0 10 -10'/>
    <path d='M140 70 q0 10 10 10 h10'/>
    <path d='M230 60 q0 -10 10 -10'/>
    <path d='M210 50 h40 q10 0 10 -10'/>
    <path d='M130 50 q10 0 10 10 v40'/>
    <path d='M250 20 q10 0 10 10 v10'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h210'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1150)'>
    <text x='-30' y='-10'>terminal:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M340.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>'</text>
    <rect x='130' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>character</text>
    <path d='M173 40 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='25' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='75' text-anchor='middle' class='literal'>"</text>
    <rect x='130' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='75' text-anchor='middle' class='rule'>character</text>
    <path d='M173 90 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='75' text-anchor='middle' class='literal'>"</text>
    <path d='M310 30 v30'/>
    <path d='M290 70 h10 q10 0 10 -10'/>
    <path d='M110 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 70 q10 0 10 10'/>
    <path d='M220 70 h50'/>
    <path d='M110 80 q0 -10 10 -10'/>
    <path d='M80 70 h50'/>
    <path d='M40 60 q0 10 10 10 h10'/>
    <path d='M310 30 q0 -10 10 -10'/>
    <path d='M290 20 h50'/>
    <path d='M110 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 20 q10 0 10 10'/>
    <path d='M220 20 h50'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 1300)'>
    <text x='-30' y='-10'>lhs:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M140.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='25' text-anchor='middle' class='rule'>identifier</text>
    <path d='M120 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1380)'>
    <text x='-30' y='-10'>rhs:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='95' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='140' y='25' text-anchor='middle' class='rule'>identifier</text>
    <rect x='105' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='140' y='55' text-anchor='middle' class='rule'>terminal</text>
    <rect x='75' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='85' text-anchor='middle' class='literal'>[</text>
    <rect x='115' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='85' text-anchor='middle' class='rule'>rhs</text>
    <rect x='185' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='75' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='115' text-anchor='middle' class='literal'>{</text>
    <rect x='115' y='100' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='115' text-anchor='middle' class='rule'>rhs</text>
    <rect x='185' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='115' text-anchor='middle' class='literal'>}</text>
    <rect x='75' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='145' text-anchor='middle' class='literal'>(</text>
    <rect x='115' y='130' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='145' text-anchor='middle' class='rule'>rhs</text>
    <rect x='185' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='145' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='175' text-anchor='middle' class='rule'>rhs</text>
    <rect x='130' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='175' text-anchor='middle' class='literal'>|</text>
    <rect x='170' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='175' text-anchor='middle' class='rule'>rhs</text>
    <rect x='60' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='205' text-anchor='middle' class='rule'>rhs</text>
    <rect x='130' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='205' text-anchor='middle' class='literal'>,</text>
    <rect x='170' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='205' text-anchor='middle' class='rule'>rhs</text>
    <path d='M240 30 v160'/>
    <path d='M220 200 h10 q10 0 10 -10'/>
    <path d='M150 200 h20'/>
    <path d='M110 200 h20'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M220 170 h10 q10 0 10 -10'/>
    <path d='M150 170 h20'/>
    <path d='M110 170 h20'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M205 140 h25 q10 0 10 -10'/>
    <path d='M165 140 h20'/>
    <path d='M95 140 h20'/>
    <path d='M40 130 q0 10 10 10 h25'/>
    <path d='M205 110 h25 q10 0 10 -10'/>
    <path d='M165 110 h20'/>
    <path d='M95 110 h20'/>
    <path d='M40 100 q0 10 10 10 h25'/>
    <path d='M205 80 h25 q10 0 10 -10'/>
    <path d='M165 80 h20'/>
    <path d='M95 80 h20'/>
    <path d='M40 70 q0 10 10 10 h25'/>
    <path d='M175 50 h55 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h55'/>
    <path d='M240 30 q0 -10 10 -10'/>
    <path d='M185 20 h85'/>
    <path d='M30 20 q10 0 10 10 v160'/>
    <path d='M10 20 h85'/>
  </g>

  <g transform='translate(40 1640)'>
    <text x='-30' y='-10'>rule:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M250.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>lhs</text>
    <rect x='100' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='110' y='25' text-anchor='middle' class='literal'>=</text>
    <rect x='140' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>rhs</text>
    <rect x='210' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='220' y='25' text-anchor='middle' class='literal'>;</text>
    <path d='M190 20 h20'/>
    <path d='M120 20 h20'/>
    <path d='M80 20 h20'/>
    <path d='M230 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 1720)'>
    <text x='-30' y='-10'>grammar:</text>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 4 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='45' text-anchor='middle' class='rule'>rule</text>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M110 40 h10 q10 0 10 -10'/>
    <path d='M120 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h150'/>
  </g>

</svg>
"
`;

exports[`Grammar expression translation > With options {"output":"svg"} > should translate a simple ABNF - URL 4`] = `
"<?xml version='1.0' encoding='utf-8'?>
<svg
  xmlns='http://www.w3.org/2000/svg'
  xmlns:xlink='http://www.w3.org/1999/xlink'

  width='460' height='900'>

  <style>
    rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
    rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
    path { fill: transparent; }
    text.literal { font-family: monospace; }
    line.ellipsis { stroke-dasharray: 1 3.5; }
    tspan.hex { font-family: monospace; font-size: 90%; }
    path.arrow { fill: black; }
  </style>

  <g transform='translate(40 50)'>
    <text x='-30' y='-10'>SYNTAX:</text>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M220.5 4 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>PRODUCTION</text>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M170 40 h10 q10 0 10 -10'/>
    <path d='M180 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h210'/>
  </g>

  <g transform='translate(40 150)'>
    <text x='-30' y='-10'>PRODUCTION:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>=</text>
    <rect x='200' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>EXPRESSION</text>
    <rect x='350' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M330 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M370 20 h20'/>
    <path d='M10 20 h20'/>
  </g>

  <g transform='translate(40 230)'>
    <text x='-30' y='-10'>EXPRESSION:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>TERM</text>
    <rect x='85' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='55' text-anchor='middle' class='literal'>|</text>
    <path d='M40 30 v10 q0 10 10 10 h35'/>
    <path d='M105 50 h35 q10 0 10 -10'/>
    <path d='M140 20 q10 0 10 10 v10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 340)'>
    <text x='-30' y='-10'>TERM:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>FACTOR</text>
    <path d='M93 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M140 20 q10 0 10 10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 440)'>
    <text x='-30' y='-10'>FACTOR:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='110' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    <rect x='120' y='40' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='165' y='55' text-anchor='middle' class='rule'>LITERAL</text>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>[</text>
    <rect x='100' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='85' text-anchor='middle' class='rule'>EXPRESSION</text>
    <rect x='250' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>(</text>
    <rect x='100' y='100' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='115' text-anchor='middle' class='rule'>EXPRESSION</text>
    <rect x='250' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>{</text>
    <rect x='100' y='130' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='145' text-anchor='middle' class='rule'>EXPRESSION</text>
    <rect x='250' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='145' text-anchor='middle' class='literal'>}</text>
    <path d='M290 30 v100'/>
    <path d='M270 140 h10 q10 0 10 -10'/>
    <path d='M230 140 h20'/>
    <path d='M80 140 h20'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M270 110 h10 q10 0 10 -10'/>
    <path d='M230 110 h20'/>
    <path d='M80 110 h20'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M270 80 h10 q10 0 10 -10'/>
    <path d='M230 80 h20'/>
    <path d='M80 80 h20'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M210 50 h70 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h70'/>
    <path d='M290 30 q0 -10 10 -10'/>
    <path d='M220 20 h100'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h100'/>
  </g>

  <g transform='translate(40 640)'>
    <text x='-30' y='-10'>IDENTIFIER:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>letter</text>
    <path d='M83 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M120 20 q10 0 10 10'/>
    <path d='M110 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </g>

  <g transform='translate(40 740)'>
    <text x='-30' y='-10'>LITERAL:</text>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>character</text>
    <path d='M103 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M160 20 q10 0 10 10'/>
    <path d='M150 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </g>

</svg>
"
`;

exports[`Grammar expression translation > With options {"output":"unicode"} > should translate a simple ABNF - URL 1`] = `
"URL:
                  ╭────>─────╮  ╭───────>────────╮  ╭──────>───────╮
                  │          │  │                │  │              │
    │├── domain ──╯── path ──╰──╯── attributes ──╰──╯── fragment ──╰──┤│

domain:
                           ╭───────>────────╮          ╭────>─────╮
                           │                │          │          │
    │├── scheme ── "://" ──╯── credential ──╰── host ──╯── port ──╰──┤│

scheme:
    │├──╮── "http"/i ───╭──┤│
        │               │
        ╰── "https"/i ──╯

credential:
                    ╭──────────>──────────╮
                    │                     │
    │├── username ──╯── ":" ── password ──╰── "@" ──┤│

host:
    │├──╭── subdomain ── "." ──╮── domain ──┤│
        │                      │
        ╰──────────<───────────╯

port:
    │├── ":" ── number ──┤│

path:
    │├── "/" ──┤│

attributes:
    │├── "?" ──╭── attribute-key-value ──╮──┤│
               │                         │
               ╰────────── "&" ──────────╯

attribute-key-pair:
               ╭────────>─────────╮
               │                  │
    │├── key ──╯── "=" ── value ──╰──┤│

"
`;

exports[`Grammar expression translation > With options {"output":"unicode"} > should translate a simple ABNF - URL 2`] = `
"nsource-list:
                        ╭────────────────────>─────────────────────╮
                        │                                          │
    │├──╮──╭─────────╮──╯──╭── source-expression ──╮──╭─────────╮──╰──╭──┤│
        │  │         │     │                       │  │         │     │
        │  ╰── WSP ──╯     ╰──────╭── WSP ──╮──────╯  ╰── WSP ──╯     │
        │                         │         │                         │
        │                         ╰────>────╯                         │
        │                                                             │
        ╰───────────╭─────────╮── "'none'"/i ──╭─────────╮────────────╯
                    │         │                │         │
                    ╰── WSP ──╯                ╰── WSP ──╯

source-expression:
    │├──╮── scheme-source ───╭──┤│
        │                    │
        ╰─── host-source ────╯
        │                    │
        ╰── keyword-source ──╯
        │                    │
        ╰─── nonce-source ───╯
        │                    │
        ╰─── hash-source ────╯

scheme-source:
    │├── scheme-part ── ":" ──┤│

host-source:
        ╭────────────>─────────────╮               ╭───────>───────╮  ╭───────>───────╮
        │                          │               │               │  │               │
    │├──╯── scheme-part ── "://" ──╰── host-part ──╯── port-part ──╰──╯── path-part ──╰──┤│

keyword-source:
    │├──╮────── "'self'"/i ───────╭──┤│
        │                         │
        ╰── "'unsafe-inline'"/i ──╯
        │                         │
        ╰─── "'unsafe-eval'"/i ───╯

base64-value:
        ╭────────<────────╮
        │                 │
    │├──╰──╮── ALPHA ──╭──╯─────╭─────────╮─────┤│
           │           │        │         │
           ╰── DIGIT ──╯        ╰── "=" ──╯
           │           │      (twice at most)
           ╰─── "+" ───╯
           │           │
           ╰─── "/" ───╯

nonce-value:
    │├── base64-value ──┤│

hash-value:
    │├── base64-value ──┤│

nonce-source:
    │├── "'nonce-"/i ── nonce-value ── "'" ──┤│

hash-algo:
    │├──╮── "sha256"/i ──╭──┤│
        │                │
        ╰── "sha384"/i ──╯
        │                │
        ╰── "sha512"/i ──╯

hash-source:
    │├── "'" ── hash-algo ── "-" ── hash-value ── "'" ──┤│

scheme-part:
    │├──? scheme production from RFC 3986, section 3.1 ?──┤│

host-part:
    │├──╮────────────────────────────────── "*" ──────────────────────────────────╭──┤│
        │                                                                         │
        │  ╭────>─────╮                                                           │
        │  │          │                                                           │
        ╰──╯── "*." ──╰──╭── host-char ──╮──╮──────────────────────────────────╭──╯
                         │               │  │                                  │
                         ╰───────<───────╯  ╰──╭── "." ──╭── host-char ──╮──╮──╯
                                               │         │               │  │
                                               │         ╰───────<───────╯  │
                                               │                            │
                                               ╰─────────────<──────────────╯

host-char:
    │├──╮── ALPHA ──╭──┤│
        │           │
        ╰── DIGIT ──╯
        │           │
        ╰─── "-" ───╯

path-part:
    │├──? path production from RFC 3986, section 3.3 ?──┤│

port-part:
    │├── ":" ──╮──╭── DIGIT ──╮──╭──┤│
               │  │           │  │
               │  ╰─────<─────╯  │
               │                 │
               ╰────── "*" ──────╯

"
`;

exports[`Grammar expression translation > With options {"output":"unicode"} > should translate a simple ABNF - URL 3`] = `
"letter:
    │├──╮── "A" ──╭──┤│
        │         │
        │    :    │
        │         │
        ╰── "Z" ──╯
        │         │
        ╰── "a" ──╯
        │         │
        │    :    │
        │         │
        ╰── "z" ──╯

digit:
    │├──╮── "0" ──╭──┤│
        │         │
        │    :    │
        │         │
        ╰── "9" ──╯

symbol:
    │├──╮── "\\"" ──╭──┤│
        │          │
        ╰── "'" ───╯
        │          │
        ╰── "(" ───╯
        │          │
        ╰── ")" ───╯
        │          │
        ╰── "," ───╯
        │          │
        ╰── "." ───╯
        │          │
        ╰── ";" ───╯
        │          │
        │    :     │
        │          │
        ╰── ">" ───╯
        │          │
        ╰── "[" ───╯
        │          │
        ╰── "]" ───╯
        │          │
        ╰── "{" ───╯
        │          │
        ╰── "|" ───╯
        │          │
        ╰── "}" ───╯

character:
    │├──╮── letter ──╭──┤│
        │            │
        ╰── digit ───╯
        │            │
        ╰── symbol ──╯
        │            │
        ╰─── "_" ────╯

identifier:
    │├── letter ──╭──────────────────╮──┤│
                  │                  │
                  ╰──╮── letter ──╭──╯
                     │            │
                     ╰── digit ───╯
                     │            │
                     ╰─── "_" ────╯

terminal:
    │├──╮─── "'" ──╭── character ──╮── "'" ───╭──┤│
        │          │               │          │
        │          ╰───────<───────╯          │
        │                                     │
        ╰── "\\"" ──╭── character ──╮── "\\"" ──╯
                   │               │
                   ╰───────<───────╯

lhs:
    │├── identifier ──┤│

rhs:
    │├──╮───── identifier ──────╭──┤│
        │                       │
        ╰────── terminal ───────╯
        │                       │
        ╰── "[" ── rhs ── "]" ──╯
        │                       │
        ╰── "{" ── rhs ── "}" ──╯
        │                       │
        ╰── "(" ── rhs ── ")" ──╯
        │                       │
        ╰── rhs ── "|" ── rhs ──╯
        │                       │
        ╰── rhs ── "," ── rhs ──╯

rule:
    │├── lhs ── "=" ── rhs ── ";" ──┤│

grammar:
    │├──╭──────────╮──┤│
        │          │
        ╰── rule ──╯

"
`;

exports[`Grammar expression translation > With options {"output":"unicode"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX:
    │├──╭────────────────╮──┤│
        │                │
        ╰── PRODUCTION ──╯

PRODUCTION:
    │├── IDENTIFIER ── "=" ── EXPRESSION ── "." ──┤│

EXPRESSION:
    │├──╭── TERM ──╮──┤│
        │          │
        ╰── "|" ───╯

TERM:
    │├──╭── FACTOR ──╮──┤│
        │            │
        ╰─────<──────╯

FACTOR:
    │├──╮───────── IDENTIFIER ─────────╭──┤│
        │                              │
        ╰────────── LITERAL ───────────╯
        │                              │
        ╰── "[" ── EXPRESSION ── "]" ──╯
        │                              │
        ╰── "(" ── EXPRESSION ── ")" ──╯
        │                              │
        ╰── "{" ── EXPRESSION ── "}" ──╯

IDENTIFIER:
    │├──╭── letter ──╮──┤│
        │            │
        ╰─────<──────╯

LITERAL:
    │├──╭── character ──╮──┤│
        │               │
        ╰───────<───────╯

"
`;

exports[`Grammar expression translation > With options {"output":"wsn"} > should translate a simple ABNF - URL 1`] = `
"<PRODUCTION> ::= <IDENTIFIER>URL = domain [  path ] [  attributes ] [  fragment ] .

domain = scheme "://" [  credential ] host [  port ] .

"
`;

exports[`Grammar expression translation > With options {"output":"wsn"} > should translate a simple ABNF - URL 2`] = `
"scheme =nsource-list = [  WSP ] [  source-expression [  WSP source-expression ] [  WSP ] ]
"
`;

exports[`Grammar expression translation > With options {"output":"wsn"} > should translate a simple ABNF - URL 3`] = `
"	| [  WSP ]letter = "A"
	| "B"
	| "C"
	| "D"
	| "E"
	| "F"
	| "G"
	| "H"
	| "I"
	| "J"
	| "K"
	| "L"
	| "M"
	| "N"
	| "O"
	| "P"
	| "Q"
	| "R"
	| "S"
	| "T"
	| "U"
	| "V"
	| "W"
	| "X"
	| "Y"
	| "Z"
	| "a"
	| "b"
	| "c"
	| "d"
	| "e"
	| "f"
	| "g"
	| "h"
	| "i"
	| "j"
	| "k"
	| "l"
	| "m"
	| "n"
	| "o"
	| "p"
	| "q"
	| "r"
	| "s"
	| "t"
	| "u"
	| "v"
	| "w"
	| "x"
	| "y"
	| "z" .

digit = "0"
	| "1"
	| "2"
	| "3"
	| "4"
	| "5"
	| "6"
	| "7"
	| "8"
	| "9" .

symbol = "["
	| "]"
	| "{"
	| "}"
	| "("
	| ")"
	| "<"
	| ">"
	| "'"
	| """"
	| "="
	| "|"
	| "."
	| ","
	| ";" .

character = letter
	| digit
	| symbol
	| "_" .

identifier = letter [  letter ] .

terminal = "'" character [  character ] "'"
	| """" character [  character ] """" .

lhs = identifier .

rhs = identifier
	| terminal
	| "[" rhs "]"
	| "{" rhs "}"
	| "(" rhs ")"
	| rhs "|" rhs
	| rhs "," rhs .

rule = lhs "=" rhs ";" .

grammar = [  rule ] .

"
`;

exports[`Grammar expression translation > With options {"output":"wsn"} > should translate a simple ABNF - URL 4`] = `
"SYNTAX = [  PRODUCTION ] .

PRODUCTION = IDENTIFIER "=" EXPRESSION "." .

EXPRESSION = TERM [  "|" TERM ] .

TERM = FACTOR [  FACTOR ] .

FACTOR = IDENTIFIER
	| LITERAL
	| "[" EXPRESSION "]"
	| "(" EXPRESSION ")"
	| "{" EXPRESSION "}" .

IDENTIFIER = letter [  letter ] .

LITERAL = "" "" character [  character ] "" "" .

"
`;

exports[`Grammar expression translation > With options {"output":"xhtml5"} > should translate a simple ABNF - URL 1`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='URL'>URL:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='600'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M590.5 34 v12 m 4 0 v-12' class='station'/>
    <a href='#domain'>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>domain</text>
    </a>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#path'>
    <rect x='150' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='175' y='45' text-anchor='middle' class='rule'>path</text>
    </a>
    <path d='M327 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#attributes'>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>attributes</text>
    </a>
    <path d='M497 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='450' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='495' y='45' text-anchor='middle' class='rule'>fragment</text>
    <path d='M430 20 v10'/>
    <path d='M560 30 q0 10 10 10'/>
    <path d='M540 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M260 20 v10'/>
    <path d='M390 30 q0 10 10 10'/>
    <path d='M370 40 h80'/>
    <path d='M250 40 q10 0 10 -10'/>
    <path d='M260 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M130 20 v10'/>
    <path d='M220 30 q0 10 10 10'/>
    <path d='M200 40 h80'/>
    <path d='M120 40 q10 0 10 -10'/>
    <path d='M130 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M100 40 h50'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='domain'>domain:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='560'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M550.5 34 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme'>
    <rect x='30' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='65' y='45' text-anchor='middle' class='rule'>scheme</text>
    </a>
    <rect x='120' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>://</text>
    <path d='M257 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#credential'>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>credential</text>
    </a>
    <a href='#host'>
    <rect x='350' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='375' y='45' text-anchor='middle' class='rule'>host</text>
    </a>
    <path d='M477 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#port'>
    <rect x='450' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='475' y='45' text-anchor='middle' class='rule'>port</text>
    </a>
    <path d='M430 20 v10'/>
    <path d='M520 30 q0 10 10 10'/>
    <path d='M500 40 h50'/>
    <path d='M420 40 q10 0 10 -10'/>
    <path d='M430 20 q0 -10 10 -10 h70 q10 0 10 10 v10'/>
    <path d='M400 40 h50'/>
    <path d='M190 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M180 40 q10 0 10 -10'/>
    <path d='M190 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M160 40 h50'/>
    <path d='M100 40 h20'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme'>scheme:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='65' width='200'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M190.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='65' y='10' height='20' width='70' rx='8' ry='8' class='literal'/>
    <text x='100' y='25' text-anchor='middle' class='literal'>http</text>
    <text x='120' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='80' rx='8' ry='8' class='literal'/>
    <text x='100' y='55' text-anchor='middle' class='literal'>https</text>
    <text x='125' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M160 30 v10'/>
    <path d='M140 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M160 30 q0 -10 10 -10'/>
    <path d='M135 20 h55'/>
    <path d='M30 20 q10 0 10 10 v10'/>
    <path d='M10 20 h55'/>
  </svg>
 </section>

 <section>
  <h2><a name='credential'>credential:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='400'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='45' text-anchor='middle' class='rule'>username</text>
    <path d='M237 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='170' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='45' text-anchor='middle' class='literal'>:</text>
    <rect x='210' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='255' y='45' text-anchor='middle' class='rule'>password</text>
    <rect x='350' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='45' text-anchor='middle' class='literal'>@</text>
    <path d='M150 20 v10'/>
    <path d='M320 30 q0 10 10 10'/>
    <path d='M300 40 h50'/>
    <path d='M190 40 h20'/>
    <path d='M140 40 q10 0 10 -10'/>
    <path d='M150 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M120 40 h50'/>
    <path d='M370 40 h20'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host'>host:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='340'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M330.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>subdomain</text>
    <rect x='170' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='180' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M123 40 l4 3 v-6 z' class='arrow'/>
    <a href='#domain'>
    <rect x='240' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='275' y='25' text-anchor='middle' class='rule'>domain</text>
    </a>
    <path d='M40 30 v0 q0 10 10 10 h150 q10 0 10 -10 v0'/>
    <path d='M200 20 q10 0 10 10'/>
    <path d='M190 20 h50'/>
    <path d='M150 20 h20'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M310 20 h20'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='port'>port:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='70' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>number</text>
    <path d='M50 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='path'>path:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='80'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M70.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>/</text>
    <path d='M50 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='attributes'>attributes:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='65' width='310'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M300.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>?</text>
    <rect x='100' y='10' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>attribute-key-value</text>
    <rect x='165' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='175' y='55' text-anchor='middle' class='literal'>&amp;</text>
    <path d='M80 30 v10 q0 10 10 10 h75'/>
    <path d='M185 50 h75 q10 0 10 -10'/>
    <path d='M260 20 q10 0 10 10 v10'/>
    <path d='M250 20 h50'/>
    <path d='M80 30 q0 -10 10 -10'/>
    <path d='M50 20 h50'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='attribute-key-pair'>attribute-key-pair:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='280'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='45' text-anchor='middle' class='rule'>key</text>
    <path d='M177 10 l-4 3 v-6 z' class='arrow'/>
    <rect x='130' y='30' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='45' text-anchor='middle' class='literal'>=</text>
    <rect x='170' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='45' text-anchor='middle' class='rule'>value</text>
    <path d='M110 20 v10'/>
    <path d='M240 30 q0 10 10 10'/>
    <path d='M220 40 h50'/>
    <path d='M150 40 h20'/>
    <path d='M100 40 q10 0 10 -10'/>
    <path d='M110 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M80 40 h50'/>
    <path d='M10 40 h20'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"xhtml5"} > should translate a simple ABNF - URL 2`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='nsource-list'>nsource-list:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='165' width='650'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M640.5 34 v12 m 4 0 v-12' class='station'/>
    <rect x='90' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='115' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M392 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#source-expression'>
    <rect x='250' y='30' height='20' width='150' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>source-expression</text>
    </a>
    <rect x='300' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='325' y='75' text-anchor='middle' class='rule'>WSP</text>
    <path d='M327 90 l-4 3 v-6 z' class='arrow'/>
    <rect x='480' y='60' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='505' y='75' text-anchor='middle' class='rule'>WSP</text>
    <rect x='180' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='205' y='155' text-anchor='middle' class='rule'>WSP</text>
    <rect x='280' y='110' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='325' y='125' text-anchor='middle' class='literal'>'none'</text>
    <text x='355' y='125' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='420' y='140' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='445' y='155' text-anchor='middle' class='rule'>WSP</text>
    <path d='M610 50 v60'/>
    <path d='M400 130 v10 q0 10 10 10 h10'/>
    <path d='M470 150 h10 q10 0 10 -10'/>
    <path d='M480 120 q10 0 10 10 v10'/>
    <path d='M400 130 q0 -10 10 -10'/>
    <path d='M370 120 h230 q10 0 10 -10'/>
    <path d='M160 130 v10 q0 10 10 10 h10'/>
    <path d='M230 150 h10 q10 0 10 -10'/>
    <path d='M240 120 q10 0 10 10 v10'/>
    <path d='M160 130 q0 -10 10 -10'/>
    <path d='M40 110 q0 10 10 10 h230'/>
    <path d='M610 50 q0 -10 10 -10'/>
    <path d='M200 20 v10'/>
    <path d='M580 30 q0 10 10 10'/>
    <path d='M460 50 v10 q0 10 10 10 h10'/>
    <path d='M530 70 h10 q10 0 10 -10'/>
    <path d='M540 40 q10 0 10 10 v10'/>
    <path d='M460 50 q0 -10 10 -10'/>
    <path d='M230 50 v10 q0 10 10 10 h60'/>
    <path d='M280 80 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M360 70 q10 0 10 10'/>
    <path d='M350 70 h60 q10 0 10 -10'/>
    <path d='M280 80 q0 -10 10 -10'/>
    <path d='M410 40 q10 0 10 10 v10'/>
    <path d='M400 40 h240'/>
    <path d='M230 50 q0 -10 10 -10'/>
    <path d='M190 40 q10 0 10 -10'/>
    <path d='M200 20 q0 -10 10 -10 h360 q10 0 10 10 v10'/>
    <path d='M70 50 v10 q0 10 10 10 h10'/>
    <path d='M140 70 h10 q10 0 10 -10'/>
    <path d='M150 40 q10 0 10 10 v10'/>
    <path d='M70 50 q0 -10 10 -10'/>
    <path d='M30 40 q10 0 10 10 v60'/>
    <path d='M10 40 h240'/>
  </svg>
 </section>

 <section>
  <h2><a name='source-expression'>source-expression:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='155' width='250'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M240.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme-source'>
    <rect x='60' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='25' text-anchor='middle' class='rule'>scheme-source</text>
    </a>
    <a href='#host-source'>
    <rect x='70' y='40' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='55' text-anchor='middle' class='rule'>host-source</text>
    </a>
    <a href='#keyword-source'>
    <rect x='60' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='125' y='85' text-anchor='middle' class='rule'>keyword-source</text>
    </a>
    <a href='#nonce-source'>
    <rect x='70' y='100' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='115' text-anchor='middle' class='rule'>nonce-source</text>
    </a>
    <a href='#hash-source'>
    <rect x='70' y='130' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='125' y='145' text-anchor='middle' class='rule'>hash-source</text>
    </a>
    <path d='M210 30 v100'/>
    <path d='M180 140 h20 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h20'/>
    <path d='M180 110 h20 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h20'/>
    <path d='M190 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M180 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M210 30 q0 -10 10 -10'/>
    <path d='M190 20 h50'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme-source'>scheme-source:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#scheme-part'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>scheme-part</text>
    </a>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>:</text>
    <path d='M140 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-source'>host-source:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='740'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M730.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M147 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#scheme-part'>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>scheme-part</text>
    </a>
    <rect x='190' y='30' height='20' width='40' rx='8' ry='8' class='literal'/>
    <text x='210' y='45' text-anchor='middle' class='literal'>://</text>
    <a href='#host-part'>
    <rect x='280' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='325' y='45' text-anchor='middle' class='rule'>host-part</text>
    </a>
    <path d='M467 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#port-part'>
    <rect x='420' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='465' y='45' text-anchor='middle' class='rule'>port-part</text>
    </a>
    <path d='M637 10 l-4 3 v-6 z' class='arrow'/>
    <a href='#path-part'>
    <rect x='590' y='30' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='635' y='45' text-anchor='middle' class='rule'>path-part</text>
    </a>
    <path d='M570 20 v10'/>
    <path d='M700 30 q0 10 10 10'/>
    <path d='M680 40 h50'/>
    <path d='M560 40 q10 0 10 -10'/>
    <path d='M570 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M400 20 v10'/>
    <path d='M530 30 q0 10 10 10'/>
    <path d='M510 40 h80'/>
    <path d='M390 40 q10 0 10 -10'/>
    <path d='M400 20 q0 -10 10 -10 h110 q10 0 10 10 v10'/>
    <path d='M370 40 h50'/>
    <path d='M40 20 v10'/>
    <path d='M250 30 q0 10 10 10'/>
    <path d='M230 40 h50'/>
    <path d='M170 40 h20'/>
    <path d='M30 40 q10 0 10 -10'/>
    <path d='M40 20 q0 -10 10 -10 h190 q10 0 10 10 v10'/>
    <path d='M10 40 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='keyword-source'>keyword-source:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='95' width='300'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='105' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='150' y='25' text-anchor='middle' class='literal'>'self'</text>
    <text x='180' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='180' rx='8' ry='8' class='literal'/>
    <text x='150' y='55' text-anchor='middle' class='literal'>'unsafe-inline'</text>
    <text x='225' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='70' y='70' height='20' width='160' rx='8' ry='8' class='literal'/>
    <text x='150' y='85' text-anchor='middle' class='literal'>'unsafe-eval'</text>
    <text x='215' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M260 30 v40'/>
    <path d='M230 80 h20 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h20'/>
    <path d='M240 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M260 30 q0 -10 10 -10'/>
    <path d='M195 20 h95'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h95'/>
  </svg>
 </section>

 <section>
  <h2><a name='base64-value'>base64-value:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='145' width='400'>
    <path d='M5.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 34 v12 m 4 0 v-12' class='station'/>
    <path d='M123 10 l4 3 v-6 z' class='arrow'/>
    <rect x='90' y='30' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='45' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='90' y='60' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='125' y='75' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='115' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='105' text-anchor='middle' class='literal'>+</text>
    <rect x='115' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='125' y='135' text-anchor='middle' class='literal'>/</text>
    <text x='305' y='100' text-anchor='middle' class='comment'>(twice at most)</text>
    <rect x='295' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='305' y='75' text-anchor='middle' class='literal'>=</text>
    <path d='M275 50 v10 q0 10 10 10 h10'/>
    <path d='M315 70 h10 q10 0 10 -10'/>
    <path d='M325 40 q10 0 10 10 v10'/>
    <path d='M275 50 q0 -10 10 -10'/>
    <path d='M40 20 v10 q0 10 10 10'/>
    <path d='M200 40 q10 0 10 -10'/>
    <path d='M180 50 v70'/>
    <path d='M135 130 h35 q10 0 10 -10'/>
    <path d='M70 120 q0 10 10 10 h35'/>
    <path d='M135 100 h35 q10 0 10 -10'/>
    <path d='M70 90 q0 10 10 10 h35'/>
    <path d='M160 70 h10 q10 0 10 -10'/>
    <path d='M70 60 q0 10 10 10 h10'/>
    <path d='M180 50 q0 -10 10 -10'/>
    <path d='M160 40 h230'/>
    <path d='M60 40 q10 0 10 10 v70'/>
    <path d='M40 20 q0 -10 10 -10 h150 q10 0 10 10 v10'/>
    <path d='M10 40 h80'/>
  </svg>
 </section>

 <section>
  <h2><a name='nonce-value'>nonce-value:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#base64-value'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    </a>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-value'>hash-value:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#base64-value'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>base64-value</text>
    </a>
    <path d='M140 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='nonce-source'>nonce-source:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='330'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='100' rx='8' ry='8' class='literal'/>
    <text x='80' y='25' text-anchor='middle' class='literal'>'nonce-</text>
    <text x='115' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <a href='#nonce-value'>
    <rect x='150' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='205' y='25' text-anchor='middle' class='rule'>nonce-value</text>
    </a>
    <rect x='280' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='290' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M260 20 h20'/>
    <path d='M130 20 h20'/>
    <path d='M300 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-algo'>hash-algo:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='95' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='25' text-anchor='middle' class='literal'>sha256</text>
    <text x='135' y='25' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='40' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='55' text-anchor='middle' class='literal'>sha384</text>
    <text x='135' y='55' text-anchor='left' class='ci'>&#x29f8;i</text>
    <rect x='60' y='70' height='20' width='90' rx='8' ry='8' class='literal'/>
    <text x='105' y='85' text-anchor='middle' class='literal'>sha512</text>
    <text x='135' y='85' text-anchor='left' class='ci'>&#x29f8;i</text>
    <path d='M170 30 v40'/>
    <path d='M150 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M150 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M170 30 q0 -10 10 -10'/>
    <path d='M150 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='hash-source'>hash-source:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='380'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M370.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>'</text>
    <a href='#hash-algo'>
    <rect x='70' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='115' y='25' text-anchor='middle' class='rule'>hash-algo</text>
    </a>
    <rect x='180' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='190' y='25' text-anchor='middle' class='literal'>-</text>
    <a href='#hash-value'>
    <rect x='220' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>hash-value</text>
    </a>
    <rect x='330' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='340' y='25' text-anchor='middle' class='literal'>'</text>
    <path d='M310 20 h20'/>
    <path d='M200 20 h20'/>
    <path d='M160 20 h20'/>
    <path d='M50 20 h20'/>
    <path d='M350 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='scheme-part'>scheme-part:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='410'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M400.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='205' y='25' text-anchor='middle' class='prose'>scheme production from RFC 3986, section 3.1</text>
    <path d='M380 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-part'>host-part:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='155' width='710'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M700.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='345' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='355' y='25' text-anchor='middle' class='literal'>*</text>
    <path d='M107 40 l-4 3 v-6 z' class='arrow'/>
    <rect x='90' y='60' height='20' width='30' rx='8' ry='8' class='literal'/>
    <text x='105' y='75' text-anchor='middle' class='literal'>*.</text>
    <a href='#host-char'>
    <rect x='200' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='245' y='75' text-anchor='middle' class='rule'>host-char</text>
    </a>
    <path d='M243 90 l4 3 v-6 z' class='arrow'/>
    <rect x='400' y='90' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='410' y='105' text-anchor='middle' class='literal'>.</text>
    <a href='#host-char'>
    <rect x='470' y='90' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='515' y='105' text-anchor='middle' class='rule'>host-char</text>
    </a>
    <path d='M513 120 l4 3 v-6 z' class='arrow'/>
    <path d='M493 140 l4 3 v-6 z' class='arrow'/>
    <path d='M670 30 v30'/>
    <path d='M640 80 v10'/>
    <path d='M380 110 v20 q0 10 10 10 h210 q10 0 10 -10'/>
    <path d='M600 100 q10 0 10 10 v20'/>
    <path d='M450 110 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M570 100 q10 0 10 10'/>
    <path d='M560 100 h70 q10 0 10 -10'/>
    <path d='M450 110 q0 -10 10 -10'/>
    <path d='M420 100 h50'/>
    <path d='M380 110 q0 -10 10 -10'/>
    <path d='M350 90 q0 10 10 10 h40'/>
    <path d='M640 80 q0 -10 10 -10'/>
    <path d='M340 70 q10 0 10 10 v10'/>
    <path d='M180 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M300 70 q10 0 10 10'/>
    <path d='M290 70 h370 q10 0 10 -10'/>
    <path d='M180 80 q0 -10 10 -10'/>
    <path d='M70 50 v10'/>
    <path d='M140 60 q0 10 10 10'/>
    <path d='M120 70 h80'/>
    <path d='M60 70 q10 0 10 -10'/>
    <path d='M70 50 q0 -10 10 -10 h50 q10 0 10 10 v10'/>
    <path d='M40 60 q0 10 10 10 h40'/>
    <path d='M670 30 q0 -10 10 -10'/>
    <path d='M365 20 h335'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h335'/>
  </svg>
 </section>

 <section>
  <h2><a name='host-char'>host-char:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='95' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>ALPHA</text>
    <rect x='60' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>DIGIT</text>
    <rect x='85' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='85' text-anchor='middle' class='literal'>-</text>
    <path d='M150 30 v40'/>
    <path d='M105 80 h35 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h35'/>
    <path d='M130 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M130 20 h50'/>
    <path d='M30 20 q10 0 10 10 v40'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='path-part'>path-part:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='390'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M380.5 14 v12 m 4 0 v-12' class='station'/>
    <text x='195' y='25' text-anchor='middle' class='prose'>path production from RFC 3986, section 3.3</text>
    <path d='M360 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='port-part'>port-part:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='85' width='290'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M280.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='30' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='40' y='25' text-anchor='middle' class='literal'>:</text>
    <rect x='130' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>DIGIT</text>
    <path d='M163 40 l4 3 v-6 z' class='arrow'/>
    <rect x='155' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='165' y='75' text-anchor='middle' class='literal'>*</text>
    <path d='M250 30 v30'/>
    <path d='M175 70 h65 q10 0 10 -10'/>
    <path d='M80 60 q0 10 10 10 h65'/>
    <path d='M250 30 q0 -10 10 -10'/>
    <path d='M110 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M210 20 q10 0 10 10'/>
    <path d='M200 20 h80'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M70 20 q10 0 10 10 v30'/>
    <path d='M50 20 h80'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"xhtml5"} > should translate a simple ABNF - URL 3`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='letter'>letter:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='145' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>A</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>Z</text>
    <rect x='60' y='80' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='95' text-anchor='middle' class='literal'>a</text>
    <line x1='70' y1='105' x2='70' y2='115' class='ellipsis'/>    <rect x='60' y='120' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='135' text-anchor='middle' class='literal'>z</text>
    <path d='M100 30 v90'/>
    <path d='M80 130 h10 q10 0 10 -10'/>
    <path d='M40 120 q0 10 10 10 h10'/>
    <path d='M80 90 h10 q10 0 10 -10'/>
    <path d='M40 80 q0 10 10 10 h10'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v90'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='digit'>digit:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='75' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>0</text>
    <line x1='70' y1='35' x2='70' y2='45' class='ellipsis'/>    <rect x='60' y='50' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='65' text-anchor='middle' class='literal'>9</text>
    <path d='M100 30 v20'/>
    <path d='M80 60 h10 q10 0 10 -10'/>
    <path d='M40 50 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v20'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='symbol'>symbol:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='405' width='140'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M130.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>"</text>
    <rect x='60' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='55' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>(</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>,</text>
    <rect x='60' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='175' text-anchor='middle' class='literal'>.</text>
    <rect x='60' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='205' text-anchor='middle' class='literal'>;</text>
    <line x1='70' y1='215' x2='70' y2='225' class='ellipsis'/>    <rect x='60' y='230' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='245' text-anchor='middle' class='literal'>&gt;</text>
    <rect x='60' y='260' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='275' text-anchor='middle' class='literal'>[</text>
    <rect x='60' y='290' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='305' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='320' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='335' text-anchor='middle' class='literal'>{</text>
    <rect x='60' y='350' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='365' text-anchor='middle' class='literal'>|</text>
    <rect x='60' y='380' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='395' text-anchor='middle' class='literal'>}</text>
    <path d='M100 30 v350'/>
    <path d='M80 390 h10 q10 0 10 -10'/>
    <path d='M40 380 q0 10 10 10 h10'/>
    <path d='M80 360 h10 q10 0 10 -10'/>
    <path d='M40 350 q0 10 10 10 h10'/>
    <path d='M80 330 h10 q10 0 10 -10'/>
    <path d='M40 320 q0 10 10 10 h10'/>
    <path d='M80 300 h10 q10 0 10 -10'/>
    <path d='M40 290 q0 10 10 10 h10'/>
    <path d='M80 270 h10 q10 0 10 -10'/>
    <path d='M40 260 q0 10 10 10 h10'/>
    <path d='M80 240 h10 q10 0 10 -10'/>
    <path d='M40 230 q0 10 10 10 h10'/>
    <path d='M80 200 h10 q10 0 10 -10'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M80 170 h10 q10 0 10 -10'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M80 140 h10 q10 0 10 -10'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M80 110 h10 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M80 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M80 50 h10 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h10'/>
    <path d='M100 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v350'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='character'>character:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='125' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#letter'>
    <rect x='70' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#digit'>
    <rect x='70' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='95' y='55' text-anchor='middle' class='rule'>digit</text>
    </a>
    <a href='#symbol'>
    <rect x='60' y='70' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='85' text-anchor='middle' class='rule'>symbol</text>
    </a>
    <rect x='85' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M150 30 v70'/>
    <path d='M105 110 h35 q10 0 10 -10'/>
    <path d='M40 100 q0 10 10 10 h35'/>
    <path d='M130 80 h10 q10 0 10 -10'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M120 50 h20 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h20'/>
    <path d='M150 30 q0 -10 10 -10'/>
    <path d='M120 20 h60'/>
    <path d='M30 20 q10 0 10 10 v70'/>
    <path d='M10 20 h60'/>
  </svg>
 </section>

 <section>
  <h2><a name='identifier'>identifier:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='125' width='300'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M290.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#letter'>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#letter'>
    <rect x='160' y='40' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='55' text-anchor='middle' class='rule'>letter</text>
    </a>
    <a href='#digit'>
    <rect x='160' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='185' y='85' text-anchor='middle' class='rule'>digit</text>
    </a>
    <rect x='175' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='185' y='115' text-anchor='middle' class='literal'>_</text>
    <path d='M110 30 v10 q0 10 10 10 h40'/>
    <path d='M230 60 v40'/>
    <path d='M195 110 h25 q10 0 10 -10'/>
    <path d='M140 100 q0 10 10 10 h25'/>
    <path d='M210 80 h10 q10 0 10 -10'/>
    <path d='M140 70 q0 10 10 10 h10'/>
    <path d='M230 60 q0 -10 10 -10'/>
    <path d='M210 50 h40 q10 0 10 -10'/>
    <path d='M130 50 q10 0 10 10 v40'/>
    <path d='M250 20 q10 0 10 10 v10'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h210'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='terminal'>terminal:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='105' width='350'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M340.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='25' text-anchor='middle' class='literal'>'</text>
    <a href='#character'>
    <rect x='130' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='25' text-anchor='middle' class='rule'>character</text>
    </a>
    <path d='M173 40 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='25' text-anchor='middle' class='literal'>'</text>
    <rect x='60' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='75' text-anchor='middle' class='literal'>"</text>
    <a href='#character'>
    <rect x='130' y='60' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='175' y='75' text-anchor='middle' class='rule'>character</text>
    </a>
    <path d='M173 90 l4 3 v-6 z' class='arrow'/>
    <rect x='270' y='60' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='280' y='75' text-anchor='middle' class='literal'>"</text>
    <path d='M310 30 v30'/>
    <path d='M290 70 h10 q10 0 10 -10'/>
    <path d='M110 80 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 70 q10 0 10 10'/>
    <path d='M220 70 h50'/>
    <path d='M110 80 q0 -10 10 -10'/>
    <path d='M80 70 h50'/>
    <path d='M40 60 q0 10 10 10 h10'/>
    <path d='M310 30 q0 -10 10 -10'/>
    <path d='M290 20 h50'/>
    <path d='M110 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M230 20 q10 0 10 10'/>
    <path d='M220 20 h50'/>
    <path d='M110 30 q0 -10 10 -10'/>
    <path d='M80 20 h50'/>
    <path d='M30 20 q10 0 10 10 v30'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='lhs'>lhs:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='150'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M140.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#identifier'>
    <rect x='30' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='75' y='25' text-anchor='middle' class='rule'>identifier</text>
    </a>
    <path d='M120 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='rhs'>rhs:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='215' width='280'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M270.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#identifier'>
    <rect x='95' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='140' y='25' text-anchor='middle' class='rule'>identifier</text>
    </a>
    <a href='#terminal'>
    <rect x='105' y='40' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='140' y='55' text-anchor='middle' class='rule'>terminal</text>
    </a>
    <rect x='75' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='85' text-anchor='middle' class='literal'>[</text>
    <a href='#rhs'>
    <rect x='115' y='70' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='85' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='75' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='115' text-anchor='middle' class='literal'>{</text>
    <a href='#rhs'>
    <rect x='115' y='100' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='115' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='115' text-anchor='middle' class='literal'>}</text>
    <rect x='75' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='85' y='145' text-anchor='middle' class='literal'>(</text>
    <a href='#rhs'>
    <rect x='115' y='130' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='140' y='145' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='185' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='195' y='145' text-anchor='middle' class='literal'>)</text>
    <a href='#rhs'>
    <rect x='60' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='175' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='130' y='160' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='175' text-anchor='middle' class='literal'>|</text>
    <a href='#rhs'>
    <rect x='170' y='160' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='175' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <a href='#rhs'>
    <rect x='60' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='205' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='130' y='190' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='140' y='205' text-anchor='middle' class='literal'>,</text>
    <a href='#rhs'>
    <rect x='170' y='190' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='195' y='205' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <path d='M240 30 v160'/>
    <path d='M220 200 h10 q10 0 10 -10'/>
    <path d='M150 200 h20'/>
    <path d='M110 200 h20'/>
    <path d='M40 190 q0 10 10 10 h10'/>
    <path d='M220 170 h10 q10 0 10 -10'/>
    <path d='M150 170 h20'/>
    <path d='M110 170 h20'/>
    <path d='M40 160 q0 10 10 10 h10'/>
    <path d='M205 140 h25 q10 0 10 -10'/>
    <path d='M165 140 h20'/>
    <path d='M95 140 h20'/>
    <path d='M40 130 q0 10 10 10 h25'/>
    <path d='M205 110 h25 q10 0 10 -10'/>
    <path d='M165 110 h20'/>
    <path d='M95 110 h20'/>
    <path d='M40 100 q0 10 10 10 h25'/>
    <path d='M205 80 h25 q10 0 10 -10'/>
    <path d='M165 80 h20'/>
    <path d='M95 80 h20'/>
    <path d='M40 70 q0 10 10 10 h25'/>
    <path d='M175 50 h55 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h55'/>
    <path d='M240 30 q0 -10 10 -10'/>
    <path d='M185 20 h85'/>
    <path d='M30 20 q10 0 10 10 v160'/>
    <path d='M10 20 h85'/>
  </svg>
 </section>

 <section>
  <h2><a name='rule'>rule:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='260'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M250.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#lhs'>
    <rect x='30' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='55' y='25' text-anchor='middle' class='rule'>lhs</text>
    </a>
    <rect x='100' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='110' y='25' text-anchor='middle' class='literal'>=</text>
    <a href='#rhs'>
    <rect x='140' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>rhs</text>
    </a>
    <rect x='210' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='220' y='25' text-anchor='middle' class='literal'>;</text>
    <path d='M190 20 h20'/>
    <path d='M120 20 h20'/>
    <path d='M80 20 h20'/>
    <path d='M230 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='grammar'>grammar:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='170'>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 4 v12 m 4 0 v-12' class='station'/>
    <a href='#rule'>
    <rect x='60' y='30' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='45' text-anchor='middle' class='rule'>rule</text>
    </a>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M110 40 h10 q10 0 10 -10'/>
    <path d='M120 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h150'/>
  </svg>
 </section>

 </body>
</html>
"
`;

exports[`Grammar expression translation > With options {"output":"xhtml5"} > should translate a simple ABNF - URL 4`] = `
"<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xml:lang='en' lang='en'
  xmlns='http://www.w3.org/1999/xhtml'
  xmlns:xlink='http://www.w3.org/1999/xlink'>

 <head>
  <meta charset='UTF-8'/>
  <style>
      rect, line, path { stroke-width: 1.5px; stroke: black; fill: transparent; }
      rect, line, path { stroke-linecap: square; stroke-linejoin: rounded; }
      path { fill: transparent; }
      text.literal { font-family: monospace; }
      a { fill: blue; }
      a:hover rect { fill: aliceblue; }
      h2 { font-size: inherit; font-weight: inherit; }
      line.ellipsis { stroke-dasharray: 1 3.5; }
      tspan.hex { font-family: monospace; font-size: 90%; }
      path.arrow { fill: black; }
      svg { margin-left: 30px; }
  </style>
 </head>

 <body>
 <section>
  <h2><a name='SYNTAX'>SYNTAX:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='230'>
    <path d='M5.5 4 v12 m 4 0 v-12' class='station'/>
    <path d='M220.5 4 v12 m 4 0 v-12' class='station'/>
    <a href='#PRODUCTION'>
    <rect x='60' y='30' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='115' y='45' text-anchor='middle' class='rule'>PRODUCTION</text>
    </a>
    <path d='M40 20 v10 q0 10 10 10 h10'/>
    <path d='M170 40 h10 q10 0 10 -10'/>
    <path d='M180 10 q10 0 10 10 v10'/>
    <path d='M40 20 q0 -10 10 -10'/>
    <path d='M10 10 h210'/>
  </svg>
 </section>

 <section>
  <h2><a name='PRODUCTION'>PRODUCTION:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='35' width='400'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M390.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#IDENTIFIER'>
    <rect x='30' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    </a>
    <rect x='160' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='170' y='25' text-anchor='middle' class='literal'>=</text>
    <a href='#EXPRESSION'>
    <rect x='200' y='10' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='265' y='25' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='350' y='10' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='360' y='25' text-anchor='middle' class='literal'>.</text>
    <path d='M330 20 h20'/>
    <path d='M180 20 h20'/>
    <path d='M140 20 h20'/>
    <path d='M370 20 h20'/>
    <path d='M10 20 h20'/>
  </svg>
 </section>

 <section>
  <h2><a name='EXPRESSION'>EXPRESSION:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='65' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#TERM'>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>TERM</text>
    </a>
    <rect x='85' y='40' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='95' y='55' text-anchor='middle' class='literal'>|</text>
    <path d='M40 30 v10 q0 10 10 10 h35'/>
    <path d='M105 50 h35 q10 0 10 -10'/>
    <path d='M140 20 q10 0 10 10 v10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='TERM'>TERM:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='190'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M180.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#FACTOR'>
    <rect x='60' y='10' height='20' width='70' rx='0' ry='0' class='rule'/>
    <text x='95' y='25' text-anchor='middle' class='rule'>FACTOR</text>
    </a>
    <path d='M93 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h90 q10 0 10 -10 v0'/>
    <path d='M140 20 q10 0 10 10'/>
    <path d='M130 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='FACTOR'>FACTOR:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='155' width='330'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M320.5 14 v12 m 4 0 v-12' class='station'/>
    <a href='#IDENTIFIER'>
    <rect x='110' y='10' height='20' width='110' rx='0' ry='0' class='rule'/>
    <text x='165' y='25' text-anchor='middle' class='rule'>IDENTIFIER</text>
    </a>
    <a href='#LITERAL'>
    <rect x='120' y='40' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='165' y='55' text-anchor='middle' class='rule'>LITERAL</text>
    </a>
    <rect x='60' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='85' text-anchor='middle' class='literal'>[</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='70' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='85' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='70' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='85' text-anchor='middle' class='literal'>]</text>
    <rect x='60' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='115' text-anchor='middle' class='literal'>(</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='100' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='115' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='100' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='115' text-anchor='middle' class='literal'>)</text>
    <rect x='60' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='70' y='145' text-anchor='middle' class='literal'>{</text>
    <a href='#EXPRESSION'>
    <rect x='100' y='130' height='20' width='130' rx='0' ry='0' class='rule'/>
    <text x='165' y='145' text-anchor='middle' class='rule'>EXPRESSION</text>
    </a>
    <rect x='250' y='130' height='20' width='20' rx='8' ry='8' class='literal'/>
    <text x='260' y='145' text-anchor='middle' class='literal'>}</text>
    <path d='M290 30 v100'/>
    <path d='M270 140 h10 q10 0 10 -10'/>
    <path d='M230 140 h20'/>
    <path d='M80 140 h20'/>
    <path d='M40 130 q0 10 10 10 h10'/>
    <path d='M270 110 h10 q10 0 10 -10'/>
    <path d='M230 110 h20'/>
    <path d='M80 110 h20'/>
    <path d='M40 100 q0 10 10 10 h10'/>
    <path d='M270 80 h10 q10 0 10 -10'/>
    <path d='M230 80 h20'/>
    <path d='M80 80 h20'/>
    <path d='M40 70 q0 10 10 10 h10'/>
    <path d='M210 50 h70 q10 0 10 -10'/>
    <path d='M40 40 q0 10 10 10 h70'/>
    <path d='M290 30 q0 -10 10 -10'/>
    <path d='M220 20 h100'/>
    <path d='M30 20 q10 0 10 10 v100'/>
    <path d='M10 20 h100'/>
  </svg>
 </section>

 <section>
  <h2><a name='IDENTIFIER'>IDENTIFIER:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='170'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M160.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='50' rx='0' ry='0' class='rule'/>
    <text x='85' y='25' text-anchor='middle' class='rule'>letter</text>
    <path d='M83 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h70 q10 0 10 -10 v0'/>
    <path d='M120 20 q10 0 10 10'/>
    <path d='M110 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 <section>
  <h2><a name='LITERAL'>LITERAL:</a></h2>
  <svg xmlns='http://www.w3.org/2000/svg' height='55' width='210'>
    <path d='M5.5 14 v12 m 4 0 v-12' class='station'/>
    <path d='M200.5 14 v12 m 4 0 v-12' class='station'/>
    <rect x='60' y='10' height='20' width='90' rx='0' ry='0' class='rule'/>
    <text x='105' y='25' text-anchor='middle' class='rule'>character</text>
    <path d='M103 40 l4 3 v-6 z' class='arrow'/>
    <path d='M40 30 v0 q0 10 10 10 h110 q10 0 10 -10 v0'/>
    <path d='M160 20 q10 0 10 10'/>
    <path d='M150 20 h50'/>
    <path d='M40 30 q0 -10 10 -10'/>
    <path d='M10 20 h50'/>
  </svg>
 </section>

 </body>
</html>
"
`;
